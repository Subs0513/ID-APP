(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/subperiod/weight/weight"],{

/***/ 185:
/*!********************************************************************************************************!*\
  !*** D:/PrivateFiles/HBuilderProjects/ID-Local/main.js?{"page":"pages%2Fsubperiod%2Fweight%2Fweight"} ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(wx, createPage) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 4);
__webpack_require__(/*! uni-pages */ 26);
var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 25));
var _weight = _interopRequireDefault(__webpack_require__(/*! ./pages/subperiod/weight/weight.vue */ 186));
// @ts-ignore
wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;
createPage(_weight.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js */ 1)["default"], __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 2)["createPage"]))

/***/ }),

/***/ 186:
/*!***********************************************************************************!*\
  !*** D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./weight.vue?vue&type=template&id=29a13d78& */ 187);
/* harmony import */ var _weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./weight.vue?vue&type=script&lang=js& */ 189);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./weight.vue?vue&type=style&index=0&lang=css& */ 191);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 32);

var renderjs





/* normalize component */

var component = Object(_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["render"],
  _weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null,
  false,
  _weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/subperiod/weight/weight.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 187:
/*!******************************************************************************************************************!*\
  !*** D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=template&id=29a13d78& ***!
  \******************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weight.vue?vue&type=template&id=29a13d78& */ 188);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_template_id_29a13d78___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 188:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=template&id=29a13d78& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var g0 = _vm.pointsAll.length
  var g1 = _vm.weekAgg.categories.length
  var g2 = _vm.distSeries.length
  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        g0: g0,
        g1: g1,
        g2: g2,
      },
    }
  )
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 189:
/*!************************************************************************************************************!*\
  !*** D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--13-1!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weight.vue?vue&type=script&lang=js& */ 190);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Programming_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 190:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--13-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 4);
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _typeof2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/typeof */ 13));
var _slicedToArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ 5));
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

var STORE_KEY = 'period_record_v1';
function pad2(n) {
  return (n < 10 ? '0' : '') + n;
}
function toDateStr(d) {
  return "".concat(d.getFullYear(), "-").concat(pad2(d.getMonth() + 1), "-").concat(pad2(d.getDate()));
}
function parseDateStr(s) {
  var _s$split$map = s.split('-').map(Number),
    _s$split$map2 = (0, _slicedToArray2.default)(_s$split$map, 3),
    y = _s$split$map2[0],
    m = _s$split$map2[1],
    d = _s$split$map2[2];
  return new Date(y, m - 1, d);
}
function loadStore() {
  var v = uni.getStorageSync(STORE_KEY);
  if (v && (0, _typeof2.default)(v) === 'object') return v;
  return {
    weightRecords: {},
    profile: {}
  };
}
function saveStore(store) {
  uni.setStorageSync(STORE_KEY, store);
}
function round2(x) {
  return Math.round(x * 100) / 100;
}
function mean(arr) {
  if (!arr.length) return 0;
  return arr.reduce(function (a, b) {
    return a + b;
  }, 0) / arr.length;
}
function stddev(arr) {
  if (arr.length <= 1) return 0;
  var m = mean(arr);
  var v = mean(arr.map(function (x) {
    return (x - m) * (x - m);
  }));
  return Math.sqrt(v);
}
function movingAvg(points) {
  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;
  var res = [];
  for (var i = 0; i < points.length; i++) {
    var start = Math.max(0, i - win + 1);
    var slice = points.slice(start, i + 1);
    res.push(round2(mean(slice)));
  }
  return res;
}
function getWeekKey(dateObj) {
  var d = new Date(Date.UTC(dateObj.getFullYear(), dateObj.getMonth(), dateObj.getDate()));
  var dayNum = d.getUTCDay() || 7;
  d.setUTCDate(d.getUTCDate() + 4 - dayNum);
  var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
  var weekNo = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);
  var y = d.getUTCFullYear();
  return "".concat(y, "-W").concat(pad2(weekNo));
}
var _default = {
  data: function data() {
    return {
      rangeKey: '30',
      todayStr: toDateStr(new Date()),
      todayKg: null,
      heightCm: null,
      // stats
      stats: {
        count: 0,
        delta: 0,
        latestText: '--',
        latestDateText: '--',
        firstText: '--',
        avgText: '--',
        stdText: '--',
        minText: '--',
        maxText: '--',
        deltaText: '--'
      },
      pointsAll: [],
      points: [],
      chartTrend: {},
      chartWeek: {},
      chartDist: {},
      weekAgg: {
        categories: [],
        values: []
      },
      distSeries: [],
      optsTrend: {
        padding: [12, 10, 8, 6],
        legend: {
          show: true,
          position: 'top'
        },
        xAxis: {
          disableGrid: true,
          labelCount: 5,
          scrollShow: false
        },
        yAxis: {
          gridType: 'dash',
          dashLength: 4
        },
        extra: {
          mix: {
            line: {
              type: 'curve',
              width: 2
            }
          }
        }
      },
      optsWeek: {
        padding: [12, 10, 8, 6],
        legend: {
          show: false
        },
        xAxis: {
          disableGrid: true,
          labelCount: 6
        },
        yAxis: {
          gridType: 'dash',
          dashLength: 4
        },
        extra: {
          column: {
            width: 14
          }
        }
      },
      optsDist: {
        padding: [12, 10, 8, 6],
        legend: {
          show: false
        },
        extra: {
          ring: {
            ringWidth: 16,
            centerColor: '#ffffff'
          }
        }
      },
      // 体重弹窗
      showWeightPopup: false,
      weightInput: '',
      weightDisplay: '0',
      // 身高弹窗
      showHeightPopup: false,
      heightInput: ''
    };
  },
  computed: {
    rangeLabel: function rangeLabel() {
      if (this.rangeKey === '7') return '7天';
      if (this.rangeKey === '30') return '30天';
      if (this.rangeKey === '90') return '90天';
      return '全部';
    },
    hasToday: function hasToday() {
      return typeof this.todayKg === 'number' && this.todayKg > 0;
    },
    todayKgText: function todayKgText() {
      return this.hasToday ? this.todayKg.toFixed(2) : '--';
    },
    todayKgDetail: function todayKgDetail() {
      return this.hasToday ? "".concat(this.todayKg.toFixed(2), " kg") : '--';
    },
    heightText: function heightText() {
      return this.heightCm ? "".concat(this.heightCm, " cm") : '未设置';
    },
    bmiValue: function bmiValue() {
      if (!this.hasToday) return null;
      if (!this.heightCm || this.heightCm <= 0) return null;
      var h = this.heightCm / 100;
      return round2(this.todayKg / (h * h));
    },
    bmiText: function bmiText() {
      if (!this.hasToday) return '--';
      if (!this.heightCm) return '未设置身高';
      if (this.bmiValue == null) return '--';
      return this.bmiValue.toFixed(1);
    },
    bmiTagText: function bmiTagText() {
      // 常用 BMI 分级（仅作参考，不用于医疗诊断）
      var v = this.bmiValue;
      if (v == null) return '';
      if (v < 18.5) return '偏瘦';
      if (v < 24) return '正常';
      if (v < 28) return '超重';
      return '肥胖';
    }
  },
  onShow: function onShow() {
    this.reload();
  },
  methods: {
    noop: function noop() {},
    setRange: function setRange(key) {
      this.rangeKey = key;
      this.recompute();
    },
    reload: function reload() {
      var store = loadStore();
      store.weightRecords = store.weightRecords || {};
      store.profile = store.profile || {};

      // 身高
      var h = Number(store.profile.heightCm || 0);
      this.heightCm = h > 0 ? h : null;

      // 今日体重
      var today = this.todayStr;
      var rec = store.weightRecords[today];
      var kg = rec && typeof rec.kg === 'number' ? rec.kg : 0;
      this.todayKg = kg > 0 ? kg : null;

      // 全部体重记录 -> 数组
      var list = Object.keys(store.weightRecords).map(function (dateStr) {
        var r = store.weightRecords[dateStr];
        var k = r && typeof r.kg === 'number' ? r.kg : null;
        if (k == null || k <= 0) return null;
        return {
          dateStr: dateStr,
          kg: Number(k)
        };
      }).filter(Boolean).sort(function (a, b) {
        return parseDateStr(a.dateStr) - parseDateStr(b.dateStr);
      });
      this.pointsAll = list;
      this.recompute();
    },
    recompute: function recompute() {
      var all = this.pointsAll.slice();
      if (!all.length) {
        this.points = [];
        this.fillEmpty();
        return;
      }
      var cut = all;
      if (this.rangeKey !== 'all') {
        var days = Number(this.rangeKey);
        var lastDate = parseDateStr(all[all.length - 1].dateStr);
        var minDate = new Date(lastDate.getTime());
        minDate.setDate(minDate.getDate() - (days - 1));
        cut = all.filter(function (p) {
          return parseDateStr(p.dateStr) >= minDate;
        });
      }
      this.points = cut;
      this.buildStats();
      this.buildTrendChart();
      this.buildWeekAgg();
      this.buildDist();
    },
    fillEmpty: function fillEmpty() {
      this.stats = {
        count: 0,
        delta: 0,
        latestText: '--',
        latestDateText: '--',
        firstText: '--',
        avgText: '--',
        stdText: '--',
        minText: '--',
        maxText: '--',
        deltaText: '--'
      };
      this.chartTrend = {};
      this.chartWeek = {};
      this.chartDist = {};
      this.weekAgg = {
        categories: [],
        values: []
      };
      this.distSeries = [];
    },
    buildStats: function buildStats() {
      var pts = this.points;
      var count = pts.length;
      var first = pts[0];
      var last = pts[pts.length - 1];
      var arr = pts.map(function (p) {
        return p.kg;
      });
      var avg = mean(arr);
      var std = stddev(arr);
      var min = Math.min.apply(null, arr);
      var max = Math.max.apply(null, arr);
      var delta = round2(last.kg - first.kg);
      this.stats = {
        count: count,
        delta: delta,
        latestText: "".concat(last.kg.toFixed(2), " kg"),
        latestDateText: last.dateStr,
        firstText: "".concat(first.kg.toFixed(2), " kg"),
        avgText: "".concat(avg.toFixed(2), " kg"),
        stdText: "".concat(std.toFixed(2), " kg"),
        minText: "".concat(min.toFixed(2), " kg"),
        maxText: "".concat(max.toFixed(2), " kg"),
        deltaText: "".concat(delta > 0 ? '+' : '').concat(delta.toFixed(2), " kg")
      };
    },
    buildTrendChart: function buildTrendChart() {
      var pts = this.points;
      var categories = pts.map(function (p) {
        return p.dateStr.slice(5);
      }); // MM-DD
      var values = pts.map(function (p) {
        return round2(p.kg);
      });
      var ma7 = movingAvg(values, 7);

      // 用 mix：两条线（体重 + 均线）
      this.chartTrend = {
        categories: categories,
        series: [{
          name: '体重',
          type: 'line',
          data: values
        }, {
          name: '7日均线',
          type: 'line',
          data: ma7
        }]
      };
    },
    buildWeekAgg: function buildWeekAgg() {
      var pts = this.points;
      var map = {};
      pts.forEach(function (p) {
        var wk = getWeekKey(parseDateStr(p.dateStr));
        map[wk] = map[wk] || [];
        map[wk].push(p.kg);
      });
      var keys = Object.keys(map).sort();
      var categories = keys.map(function (k) {
        return k.replace('-W', 'W');
      });
      var values = keys.map(function (k) {
        return round2(mean(map[k]));
      });
      this.weekAgg = {
        categories: categories,
        values: values
      };
      this.chartWeek = {
        categories: categories,
        series: [{
          name: '周均(kg)',
          data: values
        }]
      };
    },
    buildDist: function buildDist() {
      var pts = this.points;
      var arr = pts.map(function (p) {
        return p.kg;
      }).sort(function (a, b) {
        return a - b;
      });
      if (!arr.length) {
        this.distSeries = [];
        this.chartDist = {};
        return;
      }
      var min = arr[0];
      var max = arr[arr.length - 1];
      var span = Math.max(0.01, max - min);
      var step = span / 5;
      var bins = [];
      for (var i = 0; i < 5; i++) {
        var a = min + step * i;
        var b = i === 4 ? max : min + step * (i + 1);
        bins.push({
          a: a,
          b: b,
          c: 0
        });
      }
      arr.forEach(function (x) {
        for (var _i = 0; _i < bins.length; _i++) {
          var bin = bins[_i];
          var isLast = _i === bins.length - 1;
          if (x >= bin.a && x < bin.b || isLast && x <= bin.b) {
            bin.c++;
            break;
          }
        }
      });
      var series = bins.filter(function (b) {
        return b.c > 0;
      }).map(function (b) {
        return {
          name: "".concat(b.a.toFixed(1), "~").concat(b.b.toFixed(1), "kg"),
          value: b.c
        };
      });
      this.distSeries = series;
      this.chartDist = {
        series: series
      };
    },
    // ====== 今日体重录入 ======
    openWeightForToday: function openWeightForToday() {
      var store = loadStore();
      store.weightRecords = store.weightRecords || {};
      var rec = store.weightRecords[this.todayStr];
      var kg = rec && typeof rec.kg === 'number' ? rec.kg : 0;
      var showVal = '';
      if (kg > 0) showVal = kg.toFixed(2);
      this.showWeightPopup = true;
      this.weightInput = showVal;
      this.weightDisplay = showVal || '0';
    },
    onWeightCancel: function onWeightCancel() {
      this.showWeightPopup = false;
    },
    onWeightKey: function onWeightKey(e) {
      var k = e.currentTarget.dataset.k;
      var s = this.weightInput || '';
      if (k === '.') {
        if (s.includes('.')) return;
        if (s === '') s = '0';
        s = s + '.';
      } else {
        if (s === '0') s = k;else s = s + k;
      }

      // 限制：整数3位，小数2位
      var m = s.match(/^(\d{0,3})(?:\.(\d{0,2}))?/);
      if (m) {
        var intPart = m[1] || '';
        var dot = s.includes('.') ? '.' : '';
        var decPart = (s.split('.')[1] || '').slice(0, 2);
        s = intPart + (dot ? dot + decPart : '');
      }
      this.weightInput = s;
      this.weightDisplay = s === '' ? '0' : s;
    },
    onWeightDel: function onWeightDel() {
      var s = this.weightInput || '';
      if (!s) {
        this.weightDisplay = '0';
        return;
      }
      s = s.slice(0, -1);
      this.weightInput = s;
      this.weightDisplay = s === '' ? '0' : s;
    },
    onWeightConfirm: function onWeightConfirm() {
      var s = (this.weightInput || '').trim();
      if (s === '') s = (this.weightDisplay || '').trim();
      if (s === '') s = '0';
      var num = parseFloat(s);
      if (isNaN(num) || num < 0) {
        uni.showToast({
          title: '请输入有效体重',
          icon: 'none'
        });
        return;
      }
      var store = loadStore();
      store.weightRecords = store.weightRecords || {};
      store.profile = store.profile || {};
      if (num === 0) {
        if (store.weightRecords[this.todayStr]) {
          delete store.weightRecords[this.todayStr];
          saveStore(store);
          uni.showToast({
            title: '已删除今天体重',
            icon: 'none'
          });
        } else {
          uni.showToast({
            title: '今天未记录体重',
            icon: 'none'
          });
        }
        this.showWeightPopup = false;
        this.reload();
        return;
      }
      store.weightRecords[this.todayStr] = {
        kg: Number(num.toFixed(2))
      };
      saveStore(store);
      this.showWeightPopup = false;
      uni.showToast({
        title: '已记录体重',
        icon: 'none'
      });
      this.reload();
    },
    // ====== 身高设置（用于 BMI）======
    openHeightPopup: function openHeightPopup() {
      this.heightInput = this.heightCm ? String(this.heightCm) : '';
      this.showHeightPopup = true;
    },
    onHeightCancel: function onHeightCancel() {
      this.showHeightPopup = false;
    },
    onHeightConfirm: function onHeightConfirm() {
      var v = Number(String(this.heightInput || '').trim());
      if (!v || v < 80 || v > 250) {
        uni.showToast({
          title: '请输入合理身高（80~250）',
          icon: 'none'
        });
        return;
      }
      var store = loadStore();
      store.profile = store.profile || {};
      store.profile.heightCm = Math.round(v);
      saveStore(store);
      this.showHeightPopup = false;
      uni.showToast({
        title: '已保存身高',
        icon: 'none'
      });
      this.reload();
    }
  }
};
exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 2)["default"]))

/***/ }),

/***/ 191:
/*!********************************************************************************************************************!*\
  !*** D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=style&index=0&lang=css& ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./weight.vue?vue&type=style&index=0&lang=css& */ 192);
/* harmony import */ var _Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_Programming_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_Programming_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_Programming_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_Programming_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_weight_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 192:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/PrivateFiles/HBuilderProjects/ID-Local/pages/subperiod/weight/weight.vue?vue&type=style&index=0&lang=css& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[185,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/subperiod/weight/weight.js.map