(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subperiod/addlove/addlove"],{"70c2":function(t,e,s){"use strict";(function(t,e){var a=s("47a9");s("8ba4");a(s("3240"));var r=a(s("aa07"));t.__webpack_require_UNI_MP_PLUGIN__=s,e(r.default)}).call(this,s("3223")["default"],s("df3c")["createPage"])},"8d18":function(t,e,s){"use strict";s.r(e);var a=s("dfc2"),r=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},aa07:function(t,e,s){"use strict";s.r(e);var a=s("d764"),r=s("8d18");for(var i in r)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(i);s("cca2");var n=s("828b"),c=Object(n["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},cca2:function(t,e,s){"use strict";var a=s("f936"),r=s.n(a);r.a},d764:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return r})),s.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=(this._self._c,this.records.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},dfc2:function(t,e,s){"use strict";(function(t){var a=s("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(s("7ca3"));function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){(0,r.default)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(){return t.getStorageSync("period_record_v1")||{}}function o(e){t.setStorageSync("period_record_v1",e)}var d=Array.from({length:24},(function(t,e){return String(e).padStart(2,"0")})),u=Array.from({length:60},(function(t,e){return String(e).padStart(2,"0")})),l=[{key:"cs_01",label:"无措施",icon:"/static/assets/icons/cs/cs_01.svg"},{key:"cs_02",label:"避孕套",icon:"/static/assets/icons/cs/cs_02.svg"},{key:"cs_03",label:"体外排精",icon:"/static/assets/icons/cs/cs_03.svg"},{key:"cs_04",label:"未射精",icon:"/static/assets/icons/cs/cs_04.svg"},{key:"cs_05",label:"紧急避孕药",icon:"/static/assets/icons/cs/cs_05.svg"},{key:"cs_06",label:"短效避孕药",icon:"/static/assets/icons/cs/cs_06.svg"},{key:"cs_07",label:"长效避孕药",icon:"/static/assets/icons/cs/cs_07.svg"},{key:"cs_09",label:"其他措施",icon:"/static/assets/icons/cs/cs_09.svg"}],h={data:function(){return{date:"",records:[],showPopup:!1,time:"12:00",hours:d,minutes:u,timeWheelValue:[12,0],methodOptions:l,methodKey:"cs_01",method:"无措施",startX_var:0,startY_var:0,activeIndex_var:-1,rpxPerPx_var:2}},onLoad:function(e){var s=e.date||"",a=t.getSystemInfoSync(),r=750/a.windowWidth,i=c(),n=i.sexRecords&&i.sexRecords[s]?i.sexRecords[s]:[];this.setData({date:s,rpxPerPx_var:r,records:this.initSwipe(n)})},methods:{parseTimeToWheel:function(t){var e=(t||"00:00").trim(),s=e.split(":"),a=parseInt(s[0]||"0",10),r=parseInt(s[1]||"0",10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),a=Math.min(23,Math.max(0,a)),r=Math.min(59,Math.max(0,r));var i=String(a).padStart(2,"0"),n=String(r).padStart(2,"0");return{wheelValue:[a,r],safeTime:"".concat(i,":").concat(n)}},onTimeWheelChange:function(t){var e=t.detail.value||[0,0],s=e[0]||0,a=e[1]||0,r=this.hours[s]||"00",i=this.minutes[a]||"00";this.setData({timeWheelValue:[s,a],time:"".concat(r,":").concat(i)})},onSelectMethod:function(t){t&&this.setData({methodKey:t.key,method:t.label})},onAddTap:function(){var t=this.parseTimeToWheel(this.time),e=t.wheelValue,s=t.safeTime,a=this.methodKey||"cs_01";this.setData({showPopup:!0,time:s,timeWheelValue:e,methodKey:a})},onCancel:function(){this.setData({showPopup:!1})},onConfirm:function(){var t=c();t.sexRecords||(t.sexRecords={}),t.sexRecords[this.date]||(t.sexRecords[this.date]=[]),t.sexRecords[this.date].unshift({time:this.time,method:this.method}),o(t),this.setData({records:this.initSwipe(t.sexRecords[this.date]),showPopup:!1,activeIndex_var:-1})},initSwipe:function(t){return(t||[]).map((function(t){return n(n({},t),{},{_x:0,_moving:!1})}))},onSwipeTap:function(t){var e,s=t.currentTarget.dataset.index,a=null===(e=this.records)||void 0===e?void 0:e[s];a&&0!==a._x&&this.closeAllSwipe&&this.closeAllSwipe()},onSwipeStart:function(t){var e=t.currentTarget.dataset.index,s=t.touches[0];this.setData({startX_var:s.clientX,startY_var:s.clientY,activeIndex_var:e});var a=this.records.slice();a[e]&&(a[e]._moving=!0),this.setData({records:a})},onSwipeMove:function(t){var e=this.activeIndex_var;if(!(e<0)){var s=t.touches[0],a=s.clientX-this.startX_var,r=s.clientY-this.startY_var;if(!(Math.abs(a)<Math.abs(r))){var i=this.records.slice(),n=i[e];if(n){var c=a*this.rpxPerPx_var,o=c;-160===n._x&&(o=-160+c),o<-160&&(o=-160),o>0&&(o=0),n._x=o,i[e]=n,this.setData({records:i})}}}},onSwipeEnd:function(){var t=this.activeIndex_var;if(!(t<0)){var e=this.records.slice(),s=e[t];if(s){var a=s._x<-80;s._x=a?-160:0,s._moving=!1,e[t]=s,this.setData({records:e,activeIndex_var:a?t:-1})}}},onDelete:function(t){var e=t.currentTarget.dataset.index,s=c(),a=s.sexRecords&&s.sexRecords[this.date]?s.sexRecords[this.date]:[];a.length&&(a.splice(e,1),s.sexRecords||(s.sexRecords={}),s.sexRecords[this.date]=a,o(s),this.setData({records:this.initSwipe(a),activeIndex_var:-1}))}}};e.default=h}).call(this,s("df3c")["default"])},f936:function(t,e,s){}},[["70c2","common/runtime","common/vendor"]]]);