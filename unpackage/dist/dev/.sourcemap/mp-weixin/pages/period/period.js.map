{"version":3,"sources":["uni-app:///main.js","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?c33d","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?253e","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?64aa","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?a0bb","uni-app:///pages/period/period.vue","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?77a4","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/period/period.vue?ff8f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","cycleLength","periodLength","lutealDays","y","m","d","periodStarts","periodRecords","sexDates","sexRecords","settings","DEFAULTS","weightRecords","uni","store","start","end","filter","map","record","index","best","records","data","weekNames","year","month","cells","selectedDate","periodSwitchOn","touchStartX","touchStartY","showWeightPopup","weightUnit","weightInput","weightDisplay","hasWeight","selectedWeightText","isFutureSelected","hasSex","selectedSexText","hasPain","selectedPainText","isMonthAnimating","monthAnimDir","calOffsetPct","nextCells","nextYear","nextMonth","animTimer","pendingTarget","calNoAnim","onLoad","onShow","onUnload","clearTimeout","computed","calTrackStyle","transform","transition","methods","noop","buildCalendarCellsFor","migrateIfNeeded","periodDays","predPeriodDays","ovulationDays","ovulationDay","startMonthAnim","direction","targetYear","targetMonth","setTimeout","onMonthAnimEnd","refreshAll","saveStore","buildCalendarCells","dateStr","day","cls","isToday","hasHeart","isOvulationDay","computeMaps","buildMonth","goPrevMonth","goNextMonth","goToday","onTapDate","onTogglePeriod","owner","adj","r","onTouchStart","onTouchEnd","goPeriodAnalysis","url","onGoAddPain","onAddWeight","animation","onWeightCancel","onWeightKey","s","onWeightDel","onWeightConfirm","title","icon","kg","onGoAddLove"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8qB,CAAgB,4qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqMlsB;AAEA;EACAC;EACAC;EACAC;AACA;AACA;EACA;AACA;AACA;EACA;AACA;AACA;EACA;IAAA;IAAAC;IAAAC;IAAAC;EACA;AACA;AACA;EACA;EACAA;EACA;AACA;AAEA;EACA;EACA;IACA;EACA;EACA;IACAC;IACAC;IACAC;IACAC;IACA;IACAC,4BACAC,SACA;IACAC;EACA;AACA;AACA;EACAC;AACA;AAEA;EACAC;EACAA;EACAA;EAEAA;EACAA;EACA;IACA;MAAA;IAAA;IACAA;MAAA;QACAC;QACAC;MACA;IAAA;EACA;EAEAF,kDACAG;IAAA;EAAA,GACAC;IAAA;MACAH;MACAC;IACA;EAAA;AACA;AAEA;EACA;EACA;EACA;IACA;IACA;IACA;IACA;MACA;QAAAG;QAAAC;MAAA;IACA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;IACA;IACA;IACA;IAEA;IACA;MACA;QAAAD;QAAAC;MAAA;IACA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;IACA;IACA;IACA;MACA;QACAC;UAAAF;UAAAC;QAAA;MACA;IACA;EACA;EACA;AACA;AAEA;EACA;EACA;EACAE;IAAA;EAAA;EACA;AACA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;MACA3B;MACAC;MACAE;IACA;IACA;EACA;EACAyB;IACA;EACA;EAEAC;IACA;IACA;MACAC;MACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACA;QACAC;QACAC;MACA;IACA;EACA;EAEAC;IACAC;IAEA;IACAC;MACA;MACAC;MACA;MACA,0BACA,0BACA;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;UACAlB;YAAAmB;YAAAC;YAAAC;UAAA;QACA;QACA;MACA;MAEA;MAEA;QACA5B;QACAC;QACAG;QACAC;QACAF;QACAI;MACA;;MAEA;MACA;MACA;QACA;QACA;MACA;;MAEA;MACA;QACA;UAAAL;QAAA;QACA;UACA;YAAAA;UAAA;QACA;MACA;QACA;QACA;UAAAM;UAAAN;QAAA;QAEA;UACA;UACA2B;YACA;cAAArB;YAAA;YACA;cAAAN;YAAA;UACA;QACA;MAEA;IACA;IAEA;IACA4B;MAAA;MACA;MACA;MAEA;;MAEA;MACA;QACAlB;QACA;MACA;MAEA;MACA;MAEA;QACA9B;QACAC;QACAiB;QACAE;QAEAD;QACAE;MACA;MAEA;;MAEA;MACA;MACA;QACA;UAAAI;QAAA;QACA;UACA;QACA;MACA;IACA;IAEAwB;MACA;MACAX;MACA;MACA;MACA;MACA;MAGA;MACA,0BACA,0BACA;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;MAEA;MACA;MAEA;MACA;MACA;MAEA;MACA;MACA;MACA;MAEArD;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAa;QACAE;QACAO;QACAC;QACAE;QACAC;QACAC;QACAC;QACAJ;MACA;MAEAqC;IACA;IAEA;IACAC;MACA;MACA;MACA;MAEA;QAAAZ;QAAAC;QAAAC;QAAAC;MAAA;MAEA;MACA;MACA;QACA;QACA;MACA;MAEA;MACA;MACA;MACA;MAEA;MACA;QACA;QACA;QACA;QAEA;QACA;QAEA,qDACA,uDACA;QAEA;QACA;QAEAxC;UACAkD;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MAEApB;MAEA;MACA;MACA;MACA;MAEA;QAAA;MAAA;MAEAzC;QACA;QACA;QACA;QAEA;QACA;UACA0C;QACA;QAEA;QACA;QACA;UACA;UACA;UACA;YACAC;UACA;QACA;MACA;MAEA;MACA;QACA;QACA;UACA;UACA;YACA;YACA;UACA;UAEA;UACAE;UACA;YACAD;UACA;QACA;MACA;MAEA;QAAAF;QAAAC;QAAAC;QAAAC;MAAA;IACA;IAEAiB;MACA;QAAA3D;QAAAC;MAAA;MACA;IACA;IAEA2D;MACA;MACA;MACA;QACAjF;QACAD;MACA;MACA;IACA;IAEAmF;MACA;MACA;MACA;QACAlF;QACAD;MACA;MACA;IACA;IAEAoF;MACA;MACA;QACA9D;QACAC;QACAE;MACA;MACA;IACA;IAEA4D;MACA;MACA;MACA;QAAA5D;MAAA;MACA;IACA;IAEA6D;MACA;MACA;MACA1B;MACA;MACA;MACA;MAEA;QACA;QACA;UACA;UACA;QACA;QAEA;QACA;UACA2B;UACAf;UACA;UACA;QACA;QAEA;QACA;UACAgB;UACAhB;UACA;UACA;QACA;QAEA7D;QACAA;UAAAC;UAAAC;QAAA;QACA2D;QACA;MACA;QACA;QACA;UACA;UACA;UACA;UACA;UAEA;YACA7D;UACA;YACA8E;UACA;YACAA;UACA;YACA;cAAA7E;cAAAC;YAAA;YACA;cAAAD;cAAAC;YAAA;YACAF;UACA;UACA6D;QACA;QACA;MACA;IACA;IAEAkB;MACA;MACA;QACA/D;QACAC;MACA;IACA;IAEA+D;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MAEA,oCACA;IACA;IAEAC;MACAlF;QACAmF;MACA;IACA;IAEAC;MACA;MACApF;QACAmF;MACA;IACA;IAEAE;MACArF;QAAAsF;MAAA;MAEA;MACApC;MACA;MACA;MACA;MAEA;MACA;MAEA;QACA/B;QACAE;QACAC;MACA;IACA;IAEAiE;MACA;QAAApE;MAAA;MACAnB;QAAAsF;MAAA;IACA;IAEAE;MACA;MACA;MAEA;QACA;QACA;QACAC;MACA;QACA,0BACAA;MACA;MAEA;MACA;QACA;QACA;QACA;QACAA;MACA;MAEA;QACApE;QACAC;MACA;IACA;IAEAoE;MACA;MACA;QACA;UAAApE;QAAA;QACA;MACA;MACAmE;MACA;QACApE;QACAC;MACA;IACA;IAEAqE;MACA;MACA;MACA;MAEA;MACA;QACA3F;UAAA4F;UAAAC;QAAA;QACA;MACA;MAEA;MACA3C;MACA;MACAjD;MAEA;QACA;UACA;UACA6D;UACA9D;YAAA4F;YAAAC;UAAA;QACA;UACA7F;YAAA4F;YAAAC;UAAA;QACA;QACA;UAAA1E;QAAA;QACAnB;UAAAsF;QAAA;QACA;QACA;MACA;MAEA;QACAtF;UAAA4F;UAAAC;QAAA;QACA;MACA;MAEA;MACA5F;QAAA6F;MAAA;MACAhC;MAEA;QAAA3C;MAAA;MACAnB;QAAAsF;MAAA;MACAtF;QAAA4F;QAAAC;MAAA;MACA;IACA;IAEAE;MACA;MACA/F;QACAmF;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACn4BA;AAAA;AAAA;AAAA;AAA+9B,CAAgB,y7BAAG,EAAC,C;;;;;;;;;;;ACAn/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/period/period.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/period/period.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./period.vue?vue&type=template&id=9b559ab4&\"\nvar renderjs\nimport script from \"./period.vue?vue&type=script&lang=js&\"\nexport * from \"./period.vue?vue&type=script&lang=js&\"\nimport style0 from \"./period.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/period/period.vue\"\nexport default component.exports","export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./period.vue?vue&type=template&id=9b559ab4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./period.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./period.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"page-wrap\">\n        <scroll-view class=\"page\" :scroll-y=\"true\">\n            <!-- 顶部：月份标题 + 回到今天 -->\n            <view class=\"cal-header\">\n                <view class=\"nav-btn\" @tap=\"goPrevMonth\">‹</view>\n\n                <view class=\"header-center\">\n                    <text class=\"ym-text\">{{ year }}年{{ month }}月</text>\n                    <view class=\"today-btn\" @tap=\"goToday\">回到今天</view>\n                </view>\n\n                <view class=\"nav-btn\" @tap=\"goNextMonth\">›</view>\n            </view>\n\n            <!-- 星期栏 -->\n            <view class=\"week-row\">\n                <view class=\"week-item\" v-for=\"(item, index) in weekNames\" :key=\"index\">{{ item }}</view>\n            </view>\n\n            <!-- 日历网格（支持左右滑动翻月 + 翻页动画） -->\n            <view class=\"cal-swipe\" @touchstart=\"onTouchStart\" @touchend=\"onTouchEnd\">\n                <view class=\"cal-track\" :class=\"{ 'is-anim': isMonthAnimating , 'no-anim': calNoAnim}\" :style=\"calTrackStyle\" @transitionend=\"onMonthAnimEnd\">\n                    <!-- 第一屏：next 时=当前月；prev 时=上一月 -->\n                    <view class=\"cal-pane\">\n                        <view class=\"grid\">\n                            <view\n                                :class=\"'cell ' + item.cls\"\n                                @tap=\"onTapDate\"\n                                :data-date=\"item.dateStr\"\n                                v-for=\"(item, index) in (monthAnimDir === 'prev' ? nextCells : cells)\"\n                                :key=\"index\"\n                            >\n                                <view class=\"top-mark\">\n                                    <text class=\"heart\" v-if=\"item.hasHeart\">♡</text>\n                                    <view class=\"ovu-dot\" v-if=\"item.isOvulationDay\"></view>\n                                </view>\n                                <text class=\"num\">{{ item.day }}</text>\n                                <text class=\"today-tag\" v-if=\"item.isToday\">今天</text>\n                            </view>\n                        </view>\n                    </view>\n\n                    <!-- 第二屏：next 时=下一月；prev 时=当前月 -->\n                    <view class=\"cal-pane\">\n                        <view class=\"grid\">\n                            <view\n                                :class=\"'cell ' + item.cls\"\n                                @tap=\"onTapDate\"\n                                :data-date=\"item.dateStr\"\n                                v-for=\"(item, index) in (monthAnimDir === 'prev' ? cells : nextCells)\"\n                                :key=\"'n' + index\"\n                            >\n                                <view class=\"top-mark\">\n                                    <text class=\"heart\" v-if=\"item.hasHeart\">♡</text>\n                                    <view class=\"ovu-dot\" v-if=\"item.isOvulationDay\"></view>\n                                </view>\n                                <text class=\"num\">{{ item.day }}</text>\n                                <text class=\"today-tag\" v-if=\"item.isToday\">今天</text>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n            </view>\n\n            <!-- 图例 -->\n            <view class=\"legend\">\n                <view class=\"leg-item\">\n                    <view class=\"box b-period\"></view>\n                    <text>月经期</text>\n                </view>\n                <view class=\"leg-item\">\n                    <view class=\"box b-pred\"></view>\n                    <text>预测经期</text>\n                </view>\n                <view class=\"leg-item\">\n                    <view class=\"box b-ovu\"></view>\n                    <text>排卵期</text>\n                </view>\n                <view class=\"leg-item\">\n                    <view class=\"dot\"></view>\n                    <text>排卵日</text>\n                </view>\n            </view>\n\n            <!-- ✅ 新增：独立小卡片（不放进上面 panel 里） -->\n            <view class=\"mini-card tappable\" @tap=\"goPeriodAnalysis\">\n                <view class=\"mini-left\">\n                    <image class=\"mini-icon\" src=\"/static/assets/icons/f_fx.svg\" mode=\"aspectFit\" />\n                    <text class=\"mini-title\">经期健康分析</text>\n                </view>\n                <image class=\"mini-go\" src=\"/static/assets/icons/f_tz.svg\" mode=\"aspectFit\" />\n            </view>\n\n            <!-- 下方操作区：未来日期隐藏操作按钮 -->\n            <!-- <view class=\"panel\"> -->\r\n\t\t\t<view class=\"panel\" v-if=\"!isFutureSelected\">\n                <!-- 1）月经来了（开关） -->\n                <view class=\"row\">\n                    <view class=\"row-left row-left-with-icon\">\n                        <image class=\"row-icon\" src=\"/static/assets/icons/f_sd.svg\" mode=\"aspectFit\" />\n                        <text class=\"row-title\">月经来了</text>\n                    </view>\n\n                    <switch :checked=\"periodSwitchOn\" color=\"#ff4d6d\" @change=\"onTogglePeriod\" />\n                </view>\n\n                <!-- 2）痛经（加号 / 修改） -->\n                <view class=\"row tappable\" @tap=\"onGoAddPain\">\n                    <view class=\"row-left row-left-with-icon\">\n                        <image class=\"row-icon\" src=\"/static/assets/icons/f_t.svg\" mode=\"aspectFit\" />\n                        <text class=\"row-title\">痛经</text>\n                    </view>\n\n                    <view class=\"row-right\">\n                        <text class=\"row-value\" v-if=\"selectedPainText\">{{ selectedPainText }}</text>\n                        <image class=\"plus-icon\" :src=\"'/static/assets/icons/' + (hasPain ? 'f_xg.svg' : 'f_jh.svg')\" mode=\"aspectFit\" />\n                    </view>\n                </view>\n\n                <!-- 3）体重（加号/修改 + 显示数值） -->\n                <view class=\"row tappable\" @tap=\"onAddWeight\">\n                    <view class=\"row-left row-left-with-icon\">\n                        <image class=\"row-icon\" src=\"/static/assets/icons/f_tzc.svg\" mode=\"aspectFit\" />\n                        <text class=\"row-title\">体重</text>\n                    </view>\n\n                    <view class=\"row-right\">\n                        <text class=\"row-value\" v-if=\"hasWeight\">{{ selectedWeightText }}</text>\n                        <image class=\"plus-icon\" v-if=\"!hasWeight\" src=\"/static/assets/icons/f_jh.svg\" mode=\"aspectFit\" />\n                        <image class=\"plus-icon\" v-else src=\"/static/assets/icons/f_xg.svg\" mode=\"aspectFit\" />\n                    </view>\n                </view>\n\n                <!-- 4）爱爱（加号） -->\n                <view class=\"row tappable\" @tap=\"onGoAddLove\">\n                    <view class=\"row-left row-left-with-icon\">\n                        <image class=\"row-icon\" src=\"/static/assets/icons/f_sax.svg\" mode=\"aspectFit\" />\n                        <text class=\"row-title\">爱爱</text>\n                    </view>\n\n                    <view class=\"row-right\">\n                        <text class=\"row-value\" v-if=\"selectedSexText\">{{ selectedSexText }}</text>\n                        <image class=\"plus-icon\" :src=\"'/static/assets/icons/' + (hasSex ? 'f_xg.svg' : 'f_jh.svg')\" />\n                    </view>\n                </view>\n            </view>\n\n            <view class=\"bottom-spacer\"></view>\n        </scroll-view>\n\n        <!-- =====体重输入：底部弹窗===== -->\n        <view v-if=\"showWeightPopup\">\n            <view class=\"sheet-mask\" @tap=\"onWeightCancel\" @touchmove.stop.prevent=\"noop\"></view>\n\n            <view class=\"sheet\" @tap.stop.prevent=\"noop\" @touchmove.stop.prevent=\"noop\">\n                <view class=\"sheet-header\">\n                    <text class=\"sheet-btn\" @tap=\"onWeightCancel\">取消</text>\n                    <text class=\"sheet-title\">体重</text>\n                    <text class=\"sheet-btn sheet-btn-primary\" @tap=\"onWeightConfirm\">确定</text>\n                </view>\n\n                <view class=\"sheet-value\">\n                    <text class=\"value-num\">{{ weightDisplay }}</text>\n                    <text class=\"value-unit\">{{ weightUnit === 'kg' ? '公斤' : '斤' }}</text>\n                </view>\n\n                <view class=\"sheet-keypad\">\n                    <view class=\"key-row\">\n                        <view class=\"key\" data-k=\"1\" @tap=\"onWeightKey\">1</view>\n                        <view class=\"key\" data-k=\"2\" @tap=\"onWeightKey\">2</view>\n                        <view class=\"key\" data-k=\"3\" @tap=\"onWeightKey\">3</view>\n                    </view>\n                    <view class=\"key-row\">\n                        <view class=\"key\" data-k=\"4\" @tap=\"onWeightKey\">4</view>\n                        <view class=\"key\" data-k=\"5\" @tap=\"onWeightKey\">5</view>\n                        <view class=\"key\" data-k=\"6\" @tap=\"onWeightKey\">6</view>\n                    </view>\n                    <view class=\"key-row\">\n                        <view class=\"key\" data-k=\"7\" @tap=\"onWeightKey\">7</view>\n                        <view class=\"key\" data-k=\"8\" @tap=\"onWeightKey\">8</view>\n                        <view class=\"key\" data-k=\"9\" @tap=\"onWeightKey\">9</view>\n                    </view>\n                    <view class=\"key-row\">\n                        <view class=\"key\" data-k=\".\" @tap=\"onWeightKey\">.</view>\n                        <view class=\"key\" data-k=\"0\" @tap=\"onWeightKey\">0</view>\n                        <view class=\"key key-del\" @tap=\"onWeightDel\">\n                            <image class=\"key-del-icon\" src=\"/static/assets/icons/jpsc.svg\" mode=\"aspectFit\" />\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\nconst STORE_KEY = 'period_record_v1';\n\nconst DEFAULTS = {\n    cycleLength: 28,\n    periodLength: 5,\n    lutealDays: 14\n};\nfunction pad2(n) {\n    return (n < 10 ? '0' : '') + n;\n}\nfunction toDateStr(d) {\n    return `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`;\n}\nfunction parseDateStr(s) {\n    const [y, m, d] = s.split('-').map(Number);\n    return new Date(y, m - 1, d);\n}\nfunction addDays(dateObj, days) {\n    const d = new Date(dateObj.getTime());\n    d.setDate(d.getDate() + days);\n    return d;\n}\n\nfunction loadStore() {\n    const v = uni.getStorageSync(STORE_KEY);\n    if (v && typeof v === 'object') {\n        return v;\n    }\n    return {\n        periodStarts: [],\n        periodRecords: [],\n        sexDates: [],\n        sexRecords: {},\n        // ✅ 新增：爱爱详细记录：{ 'YYYY-MM-DD': [{ time:'HH:mm', method:'...' }, ...] }\n        settings: {\n            ...DEFAULTS\n        },\n        weightRecords: {}\n    };\n}\nfunction saveStore(store) {\n    uni.setStorageSync(STORE_KEY, store);\n}\n\nfunction migrateIfNeeded(store) {\n    store.periodStarts = store.periodStarts || [];\n    store.periodRecords = store.periodRecords || [];\n    store.weightRecords = store.weightRecords || {};\n\n    store.sexDates = store.sexDates || [];\n    store.sexRecords = store.sexRecords || {};\n    if (store.periodRecords.length === 0 && store.periodStarts.length > 0) {\n        const starts = store.periodStarts.slice().sort((a, b) => parseDateStr(a) - parseDateStr(b));\n        store.periodRecords = starts.map((s) => ({\n            start: s,\n            end: s\n        }));\n    }\n\n    store.periodRecords = (store.periodRecords || [])\n        .filter((r) => r && r.start)\n        .map((r) => ({\n            start: r.start,\n            end: r.end ? r.end : r.start\n        }));\n}\n\nfunction findActualRecordCoveringDate(store, dateStr) {\n    const d = parseDateStr(dateStr);\n    const records = store.periodRecords || [];\n    for (let i = 0; i < records.length; i++) {\n        const r = records[i];\n        const s = parseDateStr(r.start);\n        const e = parseDateStr(r.end);\n        if (d >= s && d <= e) {\n            return { record: r, index: i };\n        }\n    }\n    return null;\n}\n\nfunction findPredTailOwner(store, dateStr, periodLength) {\n    const d = parseDateStr(dateStr);\n    const records = store.periodRecords || [];\n    for (let i = 0; i < records.length; i++) {\n        const r = records[i];\n        const s = parseDateStr(r.start);\n        const defaultEnd = addDays(s, periodLength - 1);\n\n        const actualEnd = parseDateStr(r.end);\n        if (d > actualEnd && d >= s && d <= defaultEnd) {\n            return { record: r, index: i };\n        }\n    }\n    return null;\n}\n\nfunction findAdjacentEndOwner(store, dateStr) {\n    const records = store.periodRecords || [];\n    let best = null;\n    for (let i = 0; i < records.length; i++) {\n        const r = records[i];\n        const nextDay = toDateStr(addDays(parseDateStr(r.end), 1));\n        if (nextDay === dateStr) {\n            if (!best || parseDateStr(r.end) > parseDateStr(best.record.end)) {\n                best = { record: r, index: i };\n            }\n        }\n    }\n    return best;\n}\n\nfunction getLatestStart(store) {\n    const records = (store.periodRecords || []).slice();\n    if (records.length === 0) return null;\n    records.sort((a, b) => parseDateStr(a.start) - parseDateStr(b.start));\n    return records[records.length - 1].start;\n}\n\nexport default {\n    data() {\n        return {\n            weekNames: ['日', '一', '二', '三', '四', '五', '六'],\n            year: 0,\n            month: 0,\n            cells: [],\n            selectedDate: '',\n            periodSwitchOn: false,\n            touchStartX: 0,\n            touchStartY: 0,\n            showWeightPopup: false,\n            weightUnit: 'kg',\n            weightInput: '',\n            weightDisplay: '0',\n            hasWeight: false,\n            selectedWeightText: '',\r\n\t\t\t// 记录爱爱\r\n\t\t\tisFutureSelected: false,\r\n            hasSex: false,\n            selectedSexText: '',\n            hasPain: false,\n            selectedPainText: '',\n            // ===== 月份翻页动画 =====\n            isMonthAnimating: false,\n            monthAnimDir: 'next', // 'next' | 'prev'\n            calOffsetPct: 0, // 0 或 -50（单位：% 相对 cal-track 宽度）\n            nextCells: [],\n            nextYear: 0,\n            nextMonth: 0,\n            animTimer: null, // ✅ 兜底定时器：防止 transitionend 丢失导致卡死\n            pendingTarget: null ,// ✅ 连续翻页合并：动画中记录最后一次目标\r\n\t\t\tcalNoAnim: false,//修复翻页问题\n        };\n    },\n    onLoad() {\n        const now = new Date();\n        this.setData({\n            year: now.getFullYear(),\n            month: now.getMonth() + 1,\n            selectedDate: toDateStr(now)\n        });\n        this.refreshAll();\n    },\n    onShow() {\n        this.refreshAll();\n    },\n\n    onUnload() {\n        // ✅ 防止页面卸载时遗留定时器\n        if (this.animTimer) {\n            clearTimeout(this.animTimer);\n            this.animTimer = null;\n        }\n    },\n\n    computed: {\n        // cal-track 宽度为 200%，所以要移动一个屏幕宽度= -50%\n        calTrackStyle() {\n            const transition = this.isMonthAnimating ? 'transform 260ms cubic-bezier(0.22, 0.61, 0.36, 1)' : 'none';\n            return {\n                transform: `translateX(${this.calOffsetPct}%)`,\n                transition\n            };\n        }\n    },\n\n    methods: {\n        noop() {},\n\n        // 生成指定年月的 cells（不改变 this.year / this.month）\n        buildCalendarCellsFor(year, month) {\n            const store = loadStore();\n            migrateIfNeeded(store);\n            const hasAnyRecord = store.periodRecords && store.periodRecords.length > 0;\n            const maps = hasAnyRecord\n                ? this.computeMaps(store)\n                : { periodDays: new Set(), predPeriodDays: new Set(), ovulationDays: new Set(), ovulationDay: new Set() };\n            return this.buildCalendarCells(store, maps, year, month);\n        },\n\n        // 开始翻月动画（direction: 'next' | 'prev'）\n        startMonthAnim(direction, targetYear, targetMonth) {\n            // ✅ 如果动画进行中：不要直接 return，记录“最后一次”翻页目标，避免连续翻页卡死\n            if (this.isMonthAnimating) {\n                this.setData({\n                    pendingTarget: { direction, targetYear, targetMonth }\n                });\n                return;\n            }\n\n            const nextCells = this.buildCalendarCellsFor(targetYear, targetMonth);\n\n            this.setData({\n                isMonthAnimating: true,\n                monthAnimDir: direction,\n                nextYear: targetYear,\n                nextMonth: targetMonth,\n                nextCells,\n                pendingTarget: null\n            });\n\n            // ✅ 兜底：部分机型/极端连点会导致 transitionend 不触发，从而“卡死”\n            if (this.animTimer) clearTimeout(this.animTimer);\n            this.animTimer = setTimeout(() => {\n                // forced=true：强制结束动画并落地月份\n                this.onMonthAnimEnd(true);\n            }, 320);\n\n            // cal-track 宽度 200%，移动一个“屏幕宽度”= -50%\n            if (direction === 'next') {\n                this.setData({ calOffsetPct: 0 });\n                this.$nextTick(() => {\n                    this.setData({ calOffsetPct: -50 });\n                });\n            } else {\n\t\t\t\t// ✅ 先无动画“定位”到 -50（第二屏）\r\n\t\t\t\tthis.setData({ calNoAnim: true, calOffsetPct: -50 });\r\n\t\t\t\t\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t  // 下一帧恢复 transition，再开始真正动画（-50 -> 0）\r\n\t\t\t\t  setTimeout(() => {\r\n\t\t\t\t    this.setData({ calNoAnim: false });\r\n\t\t\t\t    this.setData({ calOffsetPct: 0 });\r\n\t\t\t\t  }, 16);\r\n\t\t\t\t});\r\n\t\t\t\t\n            }\n        },\n\n        // 动画结束：落地到目标月份，并刷新\n        onMonthAnimEnd(arg) {\n            // arg 可能是：true(兜底强制结束) / transitionend 事件对象\n            const forced = arg === true;\n\n            if (!this.isMonthAnimating) return;\n\n            // ✅ 避免 transitionend 多次触发 / 或兜底定时器重复触发\n            if (this.animTimer) {\n                clearTimeout(this.animTimer);\n                this.animTimer = null;\n            }\n\n            const targetY = this.nextYear;\n            const targetM = this.nextMonth;\n\n            this.setData({\n                year: targetY,\n                month: targetM,\n                isMonthAnimating: false,\n                calOffsetPct: 0,\r\n\t\t\t\t\r\n\t\t\t\tmonthAnimDir: 'next',\r\n\t\t\t\tnextCells: []\n            });\n\n            this.refreshAll();\n\n            // ✅ 如果用户在动画期间又点了翻页：自动接着翻到“最后一次目标”\n            const pending = this.pendingTarget;\n            if (pending && pending.targetYear && pending.targetMonth) {\n                this.setData({ pendingTarget: null });\n                this.$nextTick(() => {\n                    this.startMonthAnim(pending.direction, pending.targetYear, pending.targetMonth);\n                });\n            }\n        },\n\n        refreshAll() {\n            const store = loadStore();\n            migrateIfNeeded(store);\n            const selectedDate = this.selectedDate;\r\n\t\t\t//新增：在未来日期隐藏操作按钮\r\n\t\t\tconst todayStr = toDateStr(new Date());\r\n\t\t\tconst isFutureSelected = selectedDate > todayStr;\r\n\n\n            const hasAnyRecord = store.periodRecords && store.periodRecords.length > 0;\n            const maps = hasAnyRecord\n                ? this.computeMaps(store)\n                : { periodDays: new Set(), predPeriodDays: new Set(), ovulationDays: new Set(), ovulationDay: new Set() };\n\n            const periodSwitchOn = maps.periodDays.has(selectedDate);\n            const cells = this.buildCalendarCells(store, maps);\n\n            const rec = store.weightRecords && store.weightRecords[selectedDate];\n            const hasWeight = !!(rec && typeof rec.kg === 'number' && rec.kg > 0);\n            const selectedWeightText = hasWeight ? rec.kg.toFixed(2) + '公斤' : '';\n\n            const sexList = store.sexRecords && store.sexRecords[selectedDate] ? store.sexRecords[selectedDate] : [];\n            const sexCount = sexList.length || ((store.sexDates || []).includes(selectedDate) ? 1 : 0);\n            const hasSex = sexCount > 0;\n            const selectedSexText = hasSex ? `${sexCount}次` : '';\n\n            store.painRecords = store.painRecords || {};\n            const painList = store.painRecords[selectedDate] || [];\n            const painCount = painList.length;\n            const hasPain = painCount > 0;\n            const selectedPainText = hasPain ? `${painCount}次` : '';\n\n            // this.setData({\n            //     cells,\n            //     periodSwitchOn,\n            //     hasWeight,\n            //     selectedWeightText,\n            //     hasSex,\n            //     selectedSexText,\n            //     hasPain,\n            //     selectedPainText\n            // });\r\n\t\t\tthis.setData({\r\n\t\t\t\tcells,\r\n\t\t\t\tperiodSwitchOn,\r\n\t\t\t\thasWeight,\r\n\t\t\t\tselectedWeightText,\r\n\t\t\t\thasSex,\r\n\t\t\t\tselectedSexText,\r\n\t\t\t\thasPain,\r\n\t\t\t\tselectedPainText,\r\n\t\t\t\tisFutureSelected\r\n\t\t\t});\r\n\n            saveStore(store);\n        },\n\n        // ✅ 增加 forceYear/forceMonth：支持动画预渲染目标月份\n        buildCalendarCells(store, mapsFromRefresh, forceYear, forceMonth) {\n            const year = forceYear || this.year;\n            const month = forceMonth || this.month;\n            const selectedDate = this.selectedDate;\n\n            const maps = mapsFromRefresh || { periodDays: new Set(), predPeriodDays: new Set(), ovulationDays: new Set(), ovulationDay: new Set() };\n\n            const sexDatesSet = new Set(store.sexDates || []);\n            const sexRecords = store.sexRecords || {};\n            function hasSexOnDay(ds) {\n                const list = sexRecords[ds];\n                return (Array.isArray(list) && list.length > 0) || sexDatesSet.has(ds);\n            }\n\n            const firstDay = new Date(year, month - 1, 1);\n            const startWeekday = firstDay.getDay();\n            const startDate = addDays(firstDay, -startWeekday);\n            const todayStr = toDateStr(new Date());\n\n            const cells = [];\n            for (let i = 0; i < 42; i++) {\n                const d = addDays(startDate, i);\n                const dStr = toDateStr(d);\n                const inThisMonth = d.getMonth() === month - 1;\n\n                let cls = '';\n                if (!inThisMonth) cls += ' other';\n\n                if (maps.periodDays.has(dStr)) cls += ' period';\n                else if (maps.predPeriodDays.has(dStr)) cls += ' pred';\n                else if (maps.ovulationDays.has(dStr)) cls += ' ovulation';\n\n                if (dStr === selectedDate) cls += ' selected';\n                if (dStr === todayStr) cls += ' today';\n\n                cells.push({\n                    dateStr: dStr,\n                    day: d.getDate(),\n                    cls: cls.trim(),\n                    isToday: dStr === todayStr,\n                    hasHeart: hasSexOnDay(dStr),\n                    isOvulationDay: maps.ovulationDay.has(dStr)\n                });\n            }\n            return cells;\n        },\n\n        computeMaps(store) {\n            const settings = store.settings || DEFAULTS;\n            const cycleLength = settings.cycleLength || DEFAULTS.cycleLength;\n            const periodLength = settings.periodLength || DEFAULTS.periodLength;\n            const lutealDays = settings.lutealDays || DEFAULTS.lutealDays;\n\n            migrateIfNeeded(store);\n\n            const periodDays = new Set();\n            const predPeriodDays = new Set();\n            const ovulationDays = new Set();\n            const ovulationDay = new Set();\n\n            const records = (store.periodRecords || []).slice().sort((a, b) => parseDateStr(a.start) - parseDateStr(b.start));\n\n            records.forEach((r) => {\n                const s = parseDateStr(r.start);\n                const e = parseDateStr(r.end);\n                if (e < s) return;\n\n                const days = Math.floor((e - s) / 86400000);\n                for (let i = 0; i <= days; i++) {\n                    periodDays.add(toDateStr(addDays(s, i)));\n                }\n\n                const defaultEnd = addDays(s, periodLength - 1);\n                const actualEnd = e;\n                if (actualEnd < defaultEnd) {\n                    const startPred = addDays(actualEnd, 1);\n                    const predDays = Math.floor((defaultEnd - startPred) / 86400000);\n                    for (let i = 0; i <= predDays; i++) {\n                        predPeriodDays.add(toDateStr(addDays(startPred, i)));\n                    }\n                }\n            });\n\n            const latestStart = getLatestStart(store);\n            if (latestStart) {\n                const base = parseDateStr(latestStart);\n                for (let k = 1; k <= 6; k++) {\n                    const start = addDays(base, cycleLength * k);\n                    for (let i = 0; i < periodLength; i++) {\n                        const ds = toDateStr(addDays(start, i));\n                        if (!periodDays.has(ds)) predPeriodDays.add(ds);\n                    }\n\n                    const ovu = addDays(start, -lutealDays);\n                    ovulationDay.add(toDateStr(ovu));\n                    for (let j = -2; j <= 2; j++) {\n                        ovulationDays.add(toDateStr(addDays(ovu, j)));\n                    }\n                }\n            }\n\n            return { periodDays, predPeriodDays, ovulationDays, ovulationDay };\n        },\n\n        buildMonth(year, month) {\n            this.setData({ year, month });\n            this.refreshAll();\n        },\n\n        goPrevMonth() {\n            let y = this.year;\n            let m = this.month - 1;\n            if (m < 1) {\n                m = 12;\n                y--;\n            }\n            this.startMonthAnim('prev', y, m);\n        },\n\n        goNextMonth() {\n            let y = this.year;\n            let m = this.month + 1;\n            if (m > 12) {\n                m = 1;\n                y++;\n            }\n            this.startMonthAnim('next', y, m);\n        },\n\n        goToday() {\n            const now = new Date();\n            this.setData({\n                year: now.getFullYear(),\n                month: now.getMonth() + 1,\n                selectedDate: toDateStr(now)\n            });\n            this.refreshAll();\n        },\n\n        onTapDate(e) {\n            const dateStr = e.currentTarget.dataset.date;\n            if (!dateStr) return;\n            this.setData({ selectedDate: dateStr });\n            this.refreshAll();\n        },\n\n        onTogglePeriod(e) {\n            const checked = e.detail.value;\n            const store = loadStore();\n            migrateIfNeeded(store);\n            const dateStr = this.selectedDate;\n            const settings = store.settings || DEFAULTS;\n            const periodLength = settings.periodLength || DEFAULTS.periodLength;\n\n            if (checked) {\n                const cover = findActualRecordCoveringDate(store, dateStr);\n                if (cover) {\n                    this.refreshAll();\n                    return;\n                }\n\n                const owner = findPredTailOwner(store, dateStr, periodLength);\n                if (owner) {\n                    owner.record.end = dateStr;\n                    saveStore(store);\n                    this.refreshAll();\n                    return;\n                }\n\n                const adj = findAdjacentEndOwner(store, dateStr);\n                if (adj) {\n                    adj.record.end = dateStr;\n                    saveStore(store);\n                    this.refreshAll();\n                    return;\n                }\n\n                store.periodRecords = store.periodRecords || [];\n                store.periodRecords.push({ start: dateStr, end: dateStr });\n                saveStore(store);\n                this.refreshAll();\n            } else {\n                const cover = findActualRecordCoveringDate(store, dateStr);\n                if (cover) {\n                    const r = cover.record;\n                    const s = parseDateStr(r.start);\n                    const eDate = parseDateStr(r.end);\n                    const d = parseDateStr(dateStr);\n\n                    if (r.start === r.end) {\n                        store.periodRecords.splice(cover.index, 1);\n                    } else if (d.getTime() === s.getTime()) {\n                        r.start = toDateStr(addDays(s, 1));\n                    } else if (d.getTime() === eDate.getTime()) {\n                        r.end = toDateStr(addDays(eDate, -1));\n                    } else {\n                        const left = { start: r.start, end: toDateStr(addDays(d, -1)) };\n                        const right = { start: toDateStr(addDays(d, 1)), end: r.end };\n                        store.periodRecords.splice(cover.index, 1, left, right);\n                    }\n                    saveStore(store);\n                }\n                this.refreshAll();\n            }\n        },\n\n        onTouchStart(e) {\n            if (!e.touches || !e.touches.length) return;\n            this.setData({\n                touchStartX: e.touches[0].clientX,\n                touchStartY: e.touches[0].clientY\n            });\n        },\n\n        onTouchEnd(e) {\n            if (!e.changedTouches || !e.changedTouches.length) return;\n            const endX = e.changedTouches[0].clientX;\n            const endY = e.changedTouches[0].clientY;\n            const dx = endX - this.touchStartX;\n            const dy = endY - this.touchStartY;\n\n            if (Math.abs(dx) < 60) return;\n            if (Math.abs(dx) < Math.abs(dy) * 1.2) return;\n\n            if (dx < 0) this.goNextMonth();\n            else this.goPrevMonth();\n        },\n\n        goPeriodAnalysis() {\n            uni.navigateTo({\n                url: '/pages/subperiod/analysis/analysis'\n            });\n        },\n\n        onGoAddPain() {\n            const date = this.selectedDate;\n            uni.navigateTo({\n                url: `/pages/subperiod/addpain/addpain?date=${date}`\n            });\n        },\n\n        onAddWeight() {\n            uni.hideTabBar({ animation: true });\n\n            const store = loadStore();\n            migrateIfNeeded(store);\n            const dateStr = this.selectedDate;\n            const rec = store.weightRecords && store.weightRecords[dateStr];\n            const kg = rec && typeof rec.kg === 'number' ? rec.kg : 0;\n\n            let showVal = '';\n            if (kg > 0) showVal = kg.toFixed(2);\n\n            this.setData({\n                showWeightPopup: true,\n                weightInput: showVal,\n                weightDisplay: showVal || '0'\n            });\n        },\n\n        onWeightCancel() {\n            this.setData({ showWeightPopup: false });\n            uni.showTabBar({ animation: true });\n        },\n\n        onWeightKey(e) {\n            const k = e.currentTarget.dataset.k;\n            let s = this.weightInput || '';\n\n            if (k === '.') {\n                if (s.includes('.')) return;\n                if (s === '') s = '0';\n                s = s + '.';\n            } else {\n                if (s === '0') s = k;\n                else s = s + k;\n            }\n\n            const m = s.match(/^(\\d{0,3})(?:\\.(\\d{0,2}))?/);\n            if (m) {\n                const intPart = m[1] || '';\n                const dot = s.includes('.') ? '.' : '';\n                const decPart = (s.split('.')[1] || '').slice(0, 2);\n                s = intPart + (dot ? dot + decPart : '');\n            }\n\n            this.setData({\n                weightInput: s,\n                weightDisplay: s === '' ? '0' : s\n            });\n        },\n\n        onWeightDel() {\n            let s = this.weightInput || '';\n            if (!s) {\n                this.setData({ weightDisplay: '0' });\n                return;\n            }\n            s = s.slice(0, -1);\n            this.setData({\n                weightInput: s,\n                weightDisplay: s === '' ? '0' : s\n            });\n        },\n\n        onWeightConfirm() {\n            let s = (this.weightInput || '').trim();\n            if (s === '') s = (this.weightDisplay || '').trim();\n            if (s === '') s = '0';\n\n            const num = parseFloat(s);\n            if (isNaN(num)) {\n                uni.showToast({ title: '请输入有效体重', icon: 'none' });\n                return;\n            }\n\n            const store = loadStore();\n            migrateIfNeeded(store);\n            const dateStr = this.selectedDate;\n            store.weightRecords = store.weightRecords || {};\n\n            if (num === 0) {\n                if (store.weightRecords[dateStr]) {\n                    delete store.weightRecords[dateStr];\n                    saveStore(store);\n                    uni.showToast({ title: '已删除体重记录', icon: 'none' });\n                } else {\n                    uni.showToast({ title: '当天未记录体重', icon: 'none' });\n                }\n                this.setData({ showWeightPopup: false });\n                uni.showTabBar({ animation: true });\n                this.refreshAll();\n                return;\n            }\n\n            if (num < 0) {\n                uni.showToast({ title: '请输入有效体重', icon: 'none' });\n                return;\n            }\n\n            const kg = num;\n            store.weightRecords[dateStr] = { kg: Number(kg.toFixed(2)) };\n            saveStore(store);\n\n            this.setData({ showWeightPopup: false });\n            uni.showTabBar({ animation: true });\n            uni.showToast({ title: '已记录体重', icon: 'none' });\n            this.refreshAll();\n        },\n\n        onGoAddLove() {\n            const date = this.selectedDate;\n            uni.navigateTo({\n                url: `/pages/subperiod/addlove/addlove?date=${date}`\n            });\n        }\n    }\n};\n</script>\n\n<style>\n@import './period.css';\n</style>\n","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./period.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./period.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1768876148721\n      var cssReload = require(\"D:/Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}