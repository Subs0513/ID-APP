<view class="page"><block wx:if="{{hasData}}"><view><view class="card"><view class="card-title"><image class="card-title-icon" src="/static/assets/icons/f_gl.svg" mode="aspectFit"></image><text class="card-title-text">本周期概览</text></view><view class="kv"><text class="k">最近经期</text><text class="v">{{latestStart+" ~ "+latestEnd}}</text></view><view class="kv"><text class="k">经期长度</text><text class="v">{{latestPeriodLen+" 天"}}</text></view><view class="kv"><text class="k">周期长度</text><text class="v">{{latestCycleLen+" 天"}}</text></view><view class="kv"><text class="k">周期稳定性</text><text class="v">{{stabilityText}}</text></view><view class="kv"><text class="k">预测可信度</text><text class="v">{{confidenceText}}</text></view></view><block wx:if="{{cycleChange}}"><view class="card"><view class="cycle-head"><view class="cycle-head-left"><image class="cycle-icon" src="/static/assets/icons/f_rq.svg" mode="aspectFit"></image><text class="cycle-title">周期变化</text></view></view><view class="cycle-sub">{{cycleChange.rangeText}}</view><view class="cycle-summary"><view class="cycle-summary-left"><view class="cycle-label">周期天数</view><view class="cycle-big"><text class="cycle-num">{{cycleChange.lastLenText}}</text><text class="cycle-tag">{{cycleChange.normalTag}}</text></view></view><view class="cycle-summary-right"><view class="cycle-label">比前 1 个周期</view><view class="cycle-delta">{{cycleChange.deltaText}}</view></view></view><view class="cycle-list-title">近期周期天数</view><view class="cycle-list"><block wx:for="{{cycleChange.items}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cycle-item"><view class="cycle-item-left"><text class="cycle-date">{{item.dateLabel}}</text><text class="cycle-status">{{item.status}}</text></view><view class="cycle-bar-wrap"><view class="cycle-bar" style="{{(item.barStyle)}}"></view><text class="cycle-bar-text-fixed">{{item.lenText}}</text></view></view></block></view></view></block><view class="card"><view class="card-title"><image class="card-title-icon" src="/static/assets/icons/f_t.svg" mode="aspectFit"></image><text class="card-title-text">痛经情况</text></view><view class="p">{{painSummaryText}}</view><view class="p">{{painLevelText}}</view><view class="p">{{painPeakText}}</view></view><view class="card"><view data-event-opts="{{[['tap',[['onGoLove']]]]}}" class="card-title card-title--with-right" bindtap="__e"><view class="card-title-left"><image class="card-title-icon" src="/static/assets/icons/f_sax.svg" mode="aspectFit"></image><text class="card-title-text">行为与风险提示</text></view><image class="card-title-right-icon" src="/static/assets/icons/f_tz.svg" mode="aspectFit"></image></view><view class="sex-topline"><view class="sex-topitem"><text class="sex-toplabel">本周期爱爱</text><text class="sex-topvalue">{{sexCycleTotal}}</text><text class="sex-topunit">次</text></view></view><view class="sex-chart"><block wx:for="{{sexPhaseBars}}" wx:for-item="it" wx:for-index="idx" wx:key="idx"><view class="sex-group"><view class="sex-cols"><view class="sex-col"><text class="sex-num">{{it.prev}}</text><view class="sex-bar sex-bar--prev" style="{{('height:'+it.prevPct+'%')}}"></view></view><view class="sex-col"><text class="sex-num">{{it.cur}}</text><view class="sex-bar sex-bar--cur" style="{{('height:'+it.curPct+'%')}}"></view></view></view><text class="sex-xlabel">{{it.label}}</text></view></block></view><view class="sex-legend"><view class="legend-item"><view class="legend-dot legend-dot--prev"></view><text class="legend-text">上一周期</text></view><view class="legend-item"><view class="legend-dot legend-dot--cur"></view><text class="legend-text">本周期</text></view></view></view></view></block><view class="card weight-card"><view data-event-opts="{{[['tap',[['onGoWeight',['$event']]]]]}}" class="weight-head" bindtap="__e"><view class="weight-head-left"><image class="weight-icon" src="/static/assets/icons/f_tzc.svg" mode="aspectFit"></image><text class="weight-title">体重趋势（最近7天）</text></view><image class="weight-arrow" src="/static/assets/icons/f_tz.svg" mode="aspectFit"></image></view><view class="weight-sub">{{weight7SubText}}</view><canvas class="weight-canvas" id="weight7Canvas" canvas-id="weight7Canvas" width="{{canvasW}}" height="{{canvasH}}"></canvas><view class="p weight-hint">{{weightHintText}}</view></view></view>