<view class="page"><view class="card user-card"><image class="avatar" src="{{displayAvatar}}" mode="aspectFill"></image><view class="user-info"><view class="nickname">{{displayName}}</view><view class="desc"><block wx:if="{{isAuthed}}"><text>{{"手机号："+maskedPhone}}</text></block><block wx:else><text>未登录（本地数据可用）</text></block></view></view><button data-event-opts="{{[['tap',[['openLoginSheet',['$event']]]]]}}" class="primary-pill" bindtap="__e">{{''+(isAuthed?'账号':'登录')+''}}</button></view><view class="card list-card"><view class="row"><view class="row-left"><view class="row-title">我们在一起的日期</view><view class="row-sub">{{"起始日："+(coupleStartDate?coupleStartDate:'未设置')}}</view></view><button data-event-opts="{{[['tap',[['openCoupleDateWheel',['$event']]]]]}}" class="row-action" bindtap="__e">修改</button></view><view class="divider"></view><view class="row"><view class="row-left"><view class="row-title">{{"经期长度："+periodLength+"天"}}</view><view class="row-sub">您的月经大概几天</view></view><button data-event-opts="{{[['tap',[['openPeriodWheel',['$event']]]]]}}" class="row-action" bindtap="__e">修改</button></view><view class="divider"></view><view class="row"><view class="row-left"><view class="row-title">{{"周期长度："+cycleLength+"天"}}</view><view class="row-sub">两次月经开始日大概间隔多久</view></view><button data-event-opts="{{[['tap',[['openCycleWheel',['$event']]]]]}}" class="row-action" bindtap="__e">修改</button></view></view><view class="card list-card"><view data-event-opts="{{[['tap',[['confirmClear',['$event']]]]]}}" class="row" bindtap="__e"><view class="row-left"><view class="row-title danger-title">清空本地数据</view><view class="row-sub">删除本机数据缓存（不可恢复）</view></view><button class="row-action danger-btn">清空</button></view><view class="divider"></view><view data-event-opts="{{[['tap',[['onShare',['$event']]]]]}}" class="row" bindtap="__e"><view class="row-left"><view class="row-title">分享“岁序”</view><view class="row-sub">发给 TA 一起用</view></view><button class="row-action" open-type="share">分享</button></view><view class="divider"></view><view data-event-opts="{{[['tap',[['goAbout',['$event']]]]]}}" class="row" bindtap="__e"><view class="row-left"><view class="row-title">关于</view><view class="row-sub">版本信息与说明</view></view><button class="row-action">查看</button></view></view><block wx:if="{{showSheet}}"><view data-event-opts="{{[['tap',[['closeLoginSheet',['$event']]]]]}}" class="mask" bindtap="__e"><view data-event-opts="{{[['tap',[['noop',['$event']]]]]}}" class="sheet" catchtap="__e"><view class="sheet-header"><view class="sheet-handle"></view><view class="sheet-title">{{isAuthed?'账号管理':'手机号登录'}}</view></view><view class="sheet-body"><block wx:if="{{isAuthed}}"><view class="authed-box"><view class="authed-line">{{"当前账号："+maskedPhone}}</view><view class="field"><view class="field-label">昵称（本地）</view><input class="field-input" placeholder="给自己取个昵称" data-event-opts="{{[['input',[['onNickInput',['$event']]]]]}}" value="{{draftNickName}}" bindinput="__e"/></view><view class="field"><view class="field-label">头像（本地）</view><view class="avatar-pick"><image class="avatar-only" src="{{draftAvatarUrl||defaultAvatar}}" mode="aspectFill"></image><button data-event-opts="{{[['tap',[['pickAvatar',['$event']]]]]}}" class="small-btn" bindtap="__e">更换</button></view></view><button data-event-opts="{{[['tap',[['saveLocalProfile',['$event']]]]]}}" class="action primary" bindtap="__e">保存</button><button data-event-opts="{{[['tap',[['logoutOnly',['$event']]]]]}}" class="action danger" bindtap="__e">退出登录</button></view></block><block wx:else><view><view class="field"><view class="field-label">手机号</view><input class="field-input" type="number" maxlength="11" placeholder="请输入手机号" data-event-opts="{{[['input',[['onPhoneInput',['$event']]]]]}}" value="{{phone}}" bindinput="__e"/></view><view class="field code-field"><view class="field-label">验证码</view><view class="code-row"><input class="field-input code-input" type="number" maxlength="6" placeholder="6位验证码" data-event-opts="{{[['input',[['onCodeInput',['$event']]]]]}}" value="{{code}}" bindinput="__e"/><button class="send-btn" disabled="{{sendDisabled}}" data-event-opts="{{[['tap',[['sendCode',['$event']]]]]}}" bindtap="__e">{{''+sendBtnText+''}}</button></view></view><button class="action primary" disabled="{{loginDisabled}}" data-event-opts="{{[['tap',[['loginWithPhone',['$event']]]]]}}" bindtap="__e">登录</button><view class="tip"> 说明：目前仅本地登录态演示；接入短信接口与服务端 token 后将开启云同步。 </view></view></block></view></view></view></block><block wx:if="{{showWheel}}"><view data-event-opts="{{[['tap',[['closeWheel',['$event']]]]]}}" class="w-mask" bindtap="__e"><view data-event-opts="{{[['tap',[['noop',['$event']]]]]}}" class="w-sheet" catchtap="__e"><view class="w-top"><text data-event-opts="{{[['tap',[['closeWheel',['$event']]]]]}}" class="w-btn" bindtap="__e">取消</text><text class="w-title">{{wheelTitle}}</text><text data-event-opts="{{[['tap',[['confirmWheel',['$event']]]]]}}" class="w-btn w-ok" bindtap="__e">完成</text></view><view class="w-body"><picker-view class="w-picker" value="{{[wheelIndex]}}" indicator-style="height: 88rpx;" mask-style="background: transparent;" data-event-opts="{{[['change',[['onWheelChange',['$event']]]]]}}" bindchange="__e"><picker-view-column><block wx:for="{{wheelOptions}}" wx:for-item="it" wx:for-index="i"><view class="{{['w-item',i===wheelDraftIndex?'w-item-active':'']}}">{{''+it+'天'}}</view></block></picker-view-column></picker-view><view class="w-indicator"></view></view></view></view></block><y-m-d-wheel vue-id="8e55f700-1" show="{{showDateWheel}}" value="{{coupleStartDate}}" title="我们在一起的日期" data-event-opts="{{[['^cancel',[['closeCoupleDateWheel']]],['^confirm',[['onCoupleDateConfirm']]]]}}" bind:cancel="__e" bind:confirm="__e" bind:__l="__l"></y-m-d-wheel></view>