<view class="page"><view class="add-btn" hover-class="btn-active" hover-stay-time="80" data-event-opts="{{[['tap',[['onAddTap',['$event']]]]]}}" bindtap="__e"><image class="icon" src="/static/assets/icons/f_jh.svg" mode="aspectFit"></image><text>添加爱爱记录</text></view><block wx:if="{{$root.g0}}"><view class="list"><block wx:for="{{records}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="swipe-item" data-index="{{index}}" data-event-opts="{{[['touchstart',[['onSwipeStart',['$event']]]],['touchmove',[['onSwipeMove',['$event']]]],['touchend',[['onSwipeEnd',['$event']]]],['touchcancel',[['onSwipeEnd',['$event']]]]]}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e"><view class="swipe-actions" data-index="{{index}}" data-event-opts="{{[['tap',[['onDelete',['$event']]]]]}}" bindtap="__e">删除</view><view class="{{['swipe-content',(item._moving)?'no-anim':'']}}" style="{{'transform:'+('translateX('+item._x+'rpx)')+';'}}" data-index="{{index}}" data-event-opts="{{[['tap',[['onSwipeTap',['$event']]]]]}}" bindtap="__e"><view class="card-row"><view class="left"><image class="heart" src="/static/assets/icons/f_sax.svg" mode="aspectFit"></image><text class="count">{{"第"+(index+1)+"次"}}</text><text class="time">{{item.time}}</text></view><text class="method">{{item.method}}</text></view></view></view></block></view></block><block wx:else><view class="list"></view></block><block wx:if="{{showPopup}}"><view data-event-opts="{{[['tap',[['onCancel',['$event']]]]]}}" class="mask" bindtap="__e"></view></block><block wx:if="{{showPopup}}"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="popup" catchtap="__e"><view class="popup-title">添加爱爱记录</view><view class="card"><view class="section-head"><view class="section-left"><image class="section-icon" src="/static/assets/icons/f_sj.svg" mode="aspectFit"></image><text class="section-title">时间</text></view><text class="section-value">{{time}}</text></view><view class="time-wheel"><picker-view class="time-picker" value="{{timeWheelValue}}" indicator-style="height: 36px;" data-event-opts="{{[['change',[['onTimeWheelChange',['$event']]]]]}}" bindchange="__e"><picker-view-column><block wx:for="{{hours}}" wx:for-item="h" wx:for-index="idx"><view class="time-item">{{h}}</view></block></picker-view-column><picker-view-column><block wx:for="{{minutes}}" wx:for-item="m" wx:for-index="idx"><view class="time-item">{{m}}</view></block></picker-view-column></picker-view><view class="time-colon">:</view></view></view><view class="card"><view class="section-head"><view class="section-left"><image class="section-icon" src="/static/assets/icons/f_dp.svg" mode="aspectFit"></image><text class="section-title">措施</text></view></view><view class="method-card"><view class="method-grid"><block wx:for="{{methodOptions}}" wx:for-item="opt" wx:for-index="__i0__" wx:key="key"><view data-event-opts="{{[['tap',[['onSelectMethod',['$0'],[[['methodOptions','key',opt.key]]]]]]]}}" class="{{['method-item',(methodKey===opt.key)?'active':'']}}" bindtap="__e"><view class="method-icon-wrap"><image class="method-icon" src="{{opt.icon}}" mode="aspectFit"></image><block wx:if="{{methodKey===opt.key}}"><view class="method-badge">✓</view></block></view><text class="method-text">{{opt.label}}</text></view></block></view></view></view><view class="popup-actions"><view data-event-opts="{{[['tap',[['onCancel',['$event']]]]]}}" class="btn cancel" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['onConfirm',['$event']]]]]}}" class="btn ok" bindtap="__e">确定</view></view></view></block></view>