(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subperiod/addpain/addpain"],{"1c3e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.records.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},"2df3":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("8ba4");n(i("3240"));var r=n(i("a6df"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(r.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"46d8":function(t,e,i){},"4f43":function(t,e,i){"use strict";var n=i("46d8"),r=i.n(n);r.a},a6df:function(t,e,i){"use strict";i.r(e);var n=i("1c3e"),r=i("abc7");for(var a in r)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(a);i("4f43");var o=i("828b"),s=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=s.exports},abc7:function(t,e,i){"use strict";i.r(e);var n=i("d5ef"),r=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=r.a},d5ef:function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("7ca3")),a=n(i("34cf")),o=n(i("3b2d"));function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,r.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(){var e=t.getStorageSync("period_record_v1");return e&&"object"===(0,o.default)(e)?e:{}}function u(e){t.setStorageSync("period_record_v1",e)}var f=Array.from({length:24},(function(t,e){return String(e).padStart(2,"0")})),l=Array.from({length:60},(function(t,e){return String(e).padStart(2,"0")})),h={data:function(){return{date:"",records:[],showPopup:!1,editingIndex:-1,form:{time:"12:00",level:"",medicine:""},hours:f,minutes:l,timeWheelValue:[12,0],levels:["轻微","一般","严重","非常严重"],medicines:["无","布洛芬","对乙酰氨基酚","热敷/止痛贴","中成药","其他"],startX_var:0,startY_var:0,activeIndex_var:-1,rpxPerPx_var:2}},onLoad:function(e){var i,n=e.date||"",r=t.getSystemInfoSync(),a=750/r.windowWidth,o=d();o.painRecords=o.painRecords||{};var s=(null===(i=o.painRecords)||void 0===i?void 0:i[n])||[];this.setData({date:n,rpxPerPx_var:a,records:this.initSwipe(s)})},methods:{noop:function(){},onAddTap:function(){this.openPopupForCreate()},onItemTap:function(t,e){t&&t._x?this.closeAllSwipe():this.openPopupForEdit(e)},openPopupForCreate:function(){var t=new Date,e=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),n=this.hours.indexOf(e),r=this.minutes.indexOf(i);this.setData({showPopup:!0,editingIndex:-1,form:{time:"".concat(e,":").concat(i),level:"",medicine:""},timeWheelValue:[Math.max(n,0),Math.max(r,0)]})},openPopupForEdit:function(t){var e=this.records[t];if(e){var i=e.time||"12:00",n=i.split(":"),r=(0,a.default)(n,2),o=r[0],s=r[1],c=this.hours.indexOf(o),d=this.minutes.indexOf(s);this.setData({showPopup:!0,editingIndex:t,form:{time:i,level:e.level||"",medicine:e.medicine||""},timeWheelValue:[Math.max(c,0),Math.max(d,0)]})}},onCancel:function(){this.setData({showPopup:!1})},onTimeWheelChange:function(t){var e=t.detail.value||[0,0],i=(0,a.default)(e,2),n=i[0],r=i[1],o="".concat(this.hours[n],":").concat(this.minutes[r]);this.setData({timeWheelValue:[n,r],form:c(c({},this.form),{},{time:o})})},pickLevel:function(t){this.setData({form:c(c({},this.form),{},{level:t})})},pickMedicine:function(t){this.setData({form:c(c({},this.form),{},{medicine:t})})},onConfirm:function(){var t=d();t.painRecords=t.painRecords||{};var e=(t.painRecords[this.date]||[]).slice(),i={time:this.form.time,level:this.form.level,medicine:this.form.medicine};this.editingIndex>=0?e[this.editingIndex]=i:e.unshift(i),t.painRecords[this.date]=e,u(t),this.setData({records:this.initSwipe(e),showPopup:!1,editingIndex:-1,activeIndex_var:-1})},initSwipe:function(t){return(t||[]).map((function(t){return c(c({},t),{},{_x:0,_moving:!1})}))},closeAllSwipe:function(){var t=(this.records||[]).map((function(t){return c(c({},t),{},{_x:0,_moving:!1})}));this.setData({records:t,activeIndex_var:-1})},onSwipeStart:function(t){var e=t.currentTarget.dataset.index;-1!==this.activeIndex_var&&this.activeIndex_var!==e&&this.closeAllSwipe();var i=t.touches[0];this.setData({startX_var:i.clientX,startY_var:i.clientY,activeIndex_var:e});var n=this.records.slice();n[e]&&(n[e]._moving=!0),this.setData({records:n})},onSwipeMove:function(t){var e=this.activeIndex_var;if(!(e<0)){var i=t.touches[0],n=i.clientX-this.startX_var,r=i.clientY-this.startY_var;if(!(Math.abs(n)<Math.abs(r))){var a=this.records.slice(),o=a[e];if(o){var s=n*this.rpxPerPx_var,c=s;-160===o._x&&(c=-160+s),c<-160&&(c=-160),c>0&&(c=0),o._x=c,a[e]=o,this.setData({records:a})}}}},onSwipeEnd:function(){var t=this.activeIndex_var;if(!(t<0)){var e=this.records.slice(),i=e[t];if(i){var n=i._x<-80;i._x=n?-160:0,i._moving=!1,e[t]=i,this.setData({records:e,activeIndex_var:n?t:-1})}}},onDelete:function(t){var e=t.currentTarget.dataset.index,i=d(),n=i.painRecords&&i.painRecords[this.date]?i.painRecords[this.date]:[];n.length&&(n.splice(e,1),i.painRecords[this.date]=n,u(i),this.setData({records:this.initSwipe(n),activeIndex_var:-1}))}}};e.default=h}).call(this,i("df3c")["default"])}},[["2df3","common/runtime","common/vendor"]]]);