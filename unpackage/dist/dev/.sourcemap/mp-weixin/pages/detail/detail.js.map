{"version":3,"sources":["uni-app:///main.js","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?bab8","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?1500","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?1427","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?6093","uni-app:///pages/detail/detail.vue","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?3c7e","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/detail/detail.vue?d57a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","heroLabel","heroSub","heroNumber","heroUnit","data","id","item","typeText","computed","cardStyle","backgroundImage","backgroundSize","backgroundPosition","onLoad","uni","title","icon","url","onShow","methods","refresh","goEdit","remove","content","confirmText","confirmColor","success"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8qB,CAAgB,4qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgElsB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACA;EACA;EACA;AACA;;AAEA;AACA;EACA;EACA;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EAEA;EACA;IACA;IACA;MACAH;MACAC;MACAC;MACAC;IACA;EACA;;EAEA;EACA;IACAH;IACAC;IACAC;IACAC;EACA;AACA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAP;MACAC;MACAC;MACAC;IACA;EACA;EACAK;IACAC;MACA;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;QACAA;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MAAAC;IAAA;IAEA;IACA;MACAD;QAAAC;QAAAC;MAAA;MACAF;QAAAG;MAAA;MACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;QACAN;UAAAC;UAAAC;QAAA;QACAF;UAAAG;QAAA;QACA;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;IACA;IACAI;MACA;MACAP;QACAG;MACA;IACA;IACAK;MAAA;MACA;MACAR;QACAC;QACAQ;QACAC;QACAC;QACAC;UACA;UACA;UACA;YAAA;UAAA;UACA;UACAZ;YAAAC;YAAAC;UAAA;UACAF;YAAAG;UAAA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrMA;AAAA;AAAA;AAAA;AAA+9B,CAAgB,y7BAAG,EAAC,C;;;;;;;;;;;ACAn/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/detail/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=3e159eb4&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=3e159eb4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container detail-page\">\n    <!-- 导航栏：标题保留“详情”，背景跟页面一致，视觉上像“透明融入背景” -->\n    <page-meta\n      navigation-bar-title-text=\"详情\"\n      navigation-bar-text-style=\"black\"\n      navigation-bar-background-color=\"#fff0f5\"\n    />\n\n    <view class=\"center-wrapper\">\n      <!-- 大卡片：支持背景图（后续你做“更换背景图页面”时，只要把 bgUrl 存到 item.bgUrl 即可） -->\n      <view class=\"card big-card detail-big-card\" :style=\"cardStyle\">\n        <!-- 背景遮罩（提高文字可读性） -->\n        <view class=\"card-bg-mask\"></view>\n\n        <!-- 内容层 -->\n        <view class=\"card-content\">\n          <!-- 基本信息 -->\n          <view class=\"top-info\">\n            <text class=\"title\">{{ item ? item.title : '' }}</text>\n\n            <view class=\"meta\">\n              <view class=\"meta-row\">\n                <text class=\"meta-label\">日期：</text>\n                <text class=\"meta-value\">{{ item ? item.date : '' }}</text>\n              </view>\n              <view class=\"meta-row\">\n                <text class=\"meta-label\">类型：</text>\n                <text class=\"meta-value\">{{ typeText }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"divider\"></view>\n\n          <!-- 倒计时：数字是主角 -->\n          <view class=\"hero\">\n            <view class=\"hero-left\">\n              <text class=\"hero-label\">{{ heroLabel }}</text>\n              <text class=\"hero-sub\">{{ heroSub }}</text>\n            </view>\n\n            <view class=\"hero-right\">\n              <view class=\"hero-inline\">\n                <text class=\"hero-number\">{{ heroNumber }}</text>\n                <text class=\"hero-unit\">{{ heroUnit }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"divider\"></view>\n\n          <!-- 操作按钮：保留你原来的编辑/删除（样式也沿用原来的 class） -->\n          <view class=\"actions in-card-actions\">\n            <button class=\"btn btn-secondary action-btn\" @tap=\"goEdit\">编辑</button>\n            <button class=\"btn btn-danger action-btn\" @tap=\"remove\">删除</button>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n/**\n * 说明：\n * - 只重新设计 UI 结构；逻辑保持与你项目原来一致：从 storage 里按 id 取详情、删除后回到 home、从编辑页返回自动刷新。\n * - 背景图字段约定：item.bgUrl（你后续做“选择/上传背景图页面”时存这个字段即可）\n */\nconst storage = require('../../utils/storage');\nconst dateUtil = require('../../utils/date');\n\nfunction getTypeText(type) {\n  if (type === 'anniversary') return '纪念日';\n  if (type === 'birthday') return '生日';\n  return '其他';\n}\n\n// 生成倒计时展示：支持 includeStart（只影响正数：还有X天）\nfunction makeHero(dateStr, includeStart) {\n  const d = dateUtil.daysTo(dateStr); // target - today（>0 未来，=0 今天，<0 已过）\n  if (d === 0) {\n    return {\n      heroLabel: '就是今天！',\n      heroSub: '别忘了好好庆祝一下～',\n      heroNumber: '0',\n      heroUnit: 'days'\n    };\n  }\n\n  // 未来：还有\n  if (d > 0) {\n    const num = includeStart ? d + 1 : d;\n    return {\n      heroLabel: '还有',\n      heroSub: '期待一下吧～',\n      heroNumber: String(num),\n      heroUnit: 'days'\n    };\n  }\n\n  // 过去：已经\n  return {\n    heroLabel: '已经',\n    heroSub: '这一天已经过去',\n    heroNumber: String(Math.abs(d)),\n    heroUnit: 'days'\n  };\n}\n\nexport default {\n  data() {\n    return {\n      id: '',\n      item: null,\n      typeText: '',\n      heroLabel: '',\n      heroSub: '',\n      heroNumber: '0',\n      heroUnit: 'days'\n    };\n  },\n  computed: {\n    cardStyle() {\n      // 支持背景图：item.bgUrl（可为本地临时路径 / 网络地址 / base64 data url）\n      const bg = this.item && this.item.bgUrl ? this.item.bgUrl : '';\n      // 没有背景图时，用一个柔和的渐变兜底\n      if (!bg) {\n        return {\n          backgroundImage: 'linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92))'\n        };\n      }\n      return {\n        backgroundImage: `url('${bg}')`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center'\n      };\n    }\n  },\n  onLoad(options) {\n    uni.setNavigationBarTitle({ title: '详情' });\n\n    const id = (options && options.id) ? options.id : '';\n    if (!id) {\n      uni.showToast({ title: '缺少参数', icon: 'none' });\n      uni.switchTab({ url: '/pages/home/home' });\n      return;\n    }\n    this.id = id;\n    this.refresh();\n  },\n  onShow() {\n    // 从编辑页返回后刷新\n    if (this.id) this.refresh();\n  },\n  methods: {\n    refresh() {\n      const list = storage.getList ? storage.getList() : [];\n      const it = (list || []).find((x) => String(x.id) === String(this.id));\n      if (!it) {\n        uni.showToast({ title: '找不到该记录', icon: 'none' });\n        uni.switchTab({ url: '/pages/home/home' });\n        return;\n      }\n      this.item = it;\n      this.typeText = getTypeText(it.type);\n\n      const hero = makeHero(it.date, !!it.includeStart);\n      this.heroLabel = hero.heroLabel;\n      this.heroSub = hero.heroSub;\n      this.heroNumber = hero.heroNumber;\n      this.heroUnit = hero.heroUnit;\n    },\n    goEdit() {\n      if (!this.id) return;\n      uni.navigateTo({\n        url: `/pages/editDetail/editDetail?id=${this.id}`\n      });\n    },\n    remove() {\n      if (!this.id) return;\n      uni.showModal({\n        title: '删除',\n        content: '确定删除这个重要日子吗？',\n        confirmText: '删除',\n        confirmColor: '#ff4d6d',\n        success: (res) => {\n          if (!res.confirm) return;\n          const list = storage.getList ? storage.getList() : [];\n          const next = (list || []).filter((x) => String(x.id) !== String(this.id));\n          if (storage.setList) storage.setList(next);\n          uni.showToast({ title: '已删除', icon: 'success' });\n          uni.switchTab({ url: '/pages/home/home' });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style>\n@import './detail.css';\n\n</style>\n","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1768876148690\n      var cssReload = require(\"D:/Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}