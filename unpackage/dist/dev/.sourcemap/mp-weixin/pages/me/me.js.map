{"version":3,"sources":["uni-app:///main.js","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?3dde","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?934a","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?c571","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?a126","uni-app:///pages/me/me.vue","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?b880","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/me/me.vue?5a92"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","cycleLength","periodLength","lutealDays","v","DEFAULTS","oldSettings","next","uni","components","YMDWheel","data","defaultAvatar","coupleStartDate","userProfile","draftAvatarUrl","draftNickName","showSheet","phone","code","countdown","timer","auth","isAuthed","showWheel","wheelType","wheelTitle","wheelOptions","wheelIndex","wheelDraftIndex","showDateWheel","computed","displayName","displayAvatar","maskedPhone","sendDisabled","sendBtnText","loginDisabled","onShow","onHide","methods","openCoupleDateWheel","closeCoupleDateWheel","onCoupleDateConfirm","storage","title","icon","openLoginSheet","closeLoginSheet","noop","onPhoneInput","onCodeInput","isValidPhone","sendCode","loginWithPhone","token","at","logoutOnly","clearTimer","clearInterval","onNickInput","pickAvatar","count","sizeType","success","saveLocalProfile","nickName","avatarUrl","openPeriodWheel","opts","openCycleWheel","closeWheel","onWheelChange","confirmWheel","savePeriodSettings","confirmClear","content","confirmText","confirmColor","url","goAbout","onShare"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,WAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+G;AAC/G;AACsD;AACL;AACa;;;AAG9D;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,wEAAM;AACR,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA0qB,CAAgB,wqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiN9rB;AAAA;EAAA;IAAA;EAAA;AAAA;AAGA;AACA;AAEA;EACAC;EACAC;EACAC;AACA;AAEA;EACA;EACA;EACA;IACAF;IACAC;EACA;AACA;AACA;EACA;EACA;EACAE,2DACAC,WACAC,cACAC,KACA;EACAC;AACA;AACA;EACA;EACA;EACA;AACA;AAAA,eAEA;EACAC;IAAAC;EAAA;EAEAC;IACA;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MAEA;MACArB;MACAD;MAEA;MACAuB;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;IACA;EACA;EAEAC;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACA;IACA;IACA;MACAxB;MACAC;MACAC;IACA;;IAEA;IACA;IACA;MAAAH;IAAA;;IAEA;IACA;IACA;IACA;MAAAS;MAAAC;IAAA;;IAEA;IACA;IACA;MACArB;MACAD;IACA;EACA;EAEAsC;IACA;EACA;EAEAC;IACA;IACAC;MACA;QAAAX;MAAA;IACA;IACAY;MACA;QAAAZ;MAAA;IACA;IACAa;MACA;MACAC;MACA;QAAA/B;QAAAiB;MAAA;MACAtB;QAAAqC;QAAAC;MAAA;IACA;IAEA;IACAC;MACA;MACA;QACA9B;QACAF;QACAC;MACA;IACA;IACAgC;MACA;QAAA/B;MAAA;IACA;IACAgC;IAEAC;MACA;MACA;QAAAhC;MAAA;IACA;IACAiC;MACA;MACA;QAAAhC;MAAA;IACA;IACAiC;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA7C;QAAAqC;QAAAC;MAAA;MAEA;QAAA1B;MAAA;MACA;MACA;QACA;QACA;UAAAA;QAAA;QACA;MACA;IACA;IACAkC;MACA;MACA;MACA;QAAApC;QAAAqC;QAAAC;MAAA;MACAhD;MACA;QACAc;QACAC;QACAN;QACAE;MACA;MACAX;QAAAqC;QAAAC;MAAA;IACA;IACAW;MACAjD;MACA;QACAc;QACAC;QACAN;MACA;MACAT;QAAAqC;QAAAC;MAAA;IACA;IACAY;MACA;QACAC;QACA;MACA;IACA;IAEAC;MACA;MACA;QAAA5C;MAAA;IACA;IACA6C;MAAA;MACArD;QACAsD;QACAC;QACAC;UACA;UACA;YAAAjD;UAAA;QACA;MACA;IACA;IACAkD;MACA;MACA;QACAzD;UAAAqC;UAAAC;QAAA;QACA;MACA;MACA;QACAoB;QACAC;MACA;MACAvB;MACA;QAAA9B;MAAA;MACAN;QAAAqC;QAAAC;MAAA;MACA;IACA;IAEA;IACAsB;MACA;MACA;QAAAC;MAAA;MACA;MAEA;QACA7C;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACAyC;MACA;MACA;QAAAD;MAAA;MACA;MAEA;QACA7C;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACA0C;MACA;QAAA/C;MAAA;IACA;IACAgD;MACA;MACA;MACA;QAAA3C;MAAA;IACA;IACA4C;MACA;MACA;MAEA;QACAC;UAAAxE;QAAA;QACA;UAAAA;QAAA;MACA;QACAwE;UAAAzE;QAAA;QACA;UAAAA;QAAA;MACA;MAEA;QAAAuB;MAAA;MACAhB;QAAAqC;QAAAC;MAAA;IACA;IAEA;IACA6B;MAAA;MACAnE;QACAqC;QACA+B;QACAC;QACAC;QACAd;UACA;YACA;cACAxD;YACA;cACA;gBACAA;gBACAA;cACA;YACA;YAEA;cACAM;cACAC;cACAC;cACAM;cACAC;cACAL;cACAC;cACAN;cACAI;cACAO;cACAM;YACA;YAEAtB;cAAAqC;cAAAC;YAAA;YACAtC;cAAAuE;YAAA;UACA;QACA;MACA;IACA;IAEAC;MACAxE;QAAAuE;MAAA;IACA;IAEAE;MACA;IAAA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACziBA;AAAA;AAAA;AAAA;AAA29B,CAAgB,q7BAAG,EAAC,C;;;;;;;;;;;ACA/+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/me/me.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/me/me.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./me.vue?vue&type=template&id=259fb574&\"\nvar renderjs\nimport script from \"./me.vue?vue&type=script&lang=js&\"\nexport * from \"./me.vue?vue&type=script&lang=js&\"\nimport style0 from \"./me.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/me/me.vue\"\nexport default component.exports","export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=template&id=259fb574&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page\">\n    <!-- 顶部：账号卡 -->\n    <view class=\"card user-card\">\n      <image class=\"avatar\" :src=\"displayAvatar\" mode=\"aspectFill\" />\n\n      <view class=\"user-info\">\n        <view class=\"nickname\">{{ displayName }}</view>\n        <view class=\"desc\">\n          <text v-if=\"isAuthed\">手机号：{{ maskedPhone }}</text>\n          <text v-else>未登录（本地数据可用）</text>\n        </view>\n      </view>\n\n      <button class=\"primary-pill\" @tap=\"openLoginSheet\">\n        {{ isAuthed ? '账号' : '登录' }}\n      </button>\n    </view>\n\n    <!-- 设置卡 -->\n    <view class=\"card list-card\">\n      <!-- 在一起日期 -->\n      <view class=\"row\">\n        <view class=\"row-left\">\n          <view class=\"row-title\">我们在一起的日期</view>\n          <view class=\"row-sub\">起始日：{{ coupleStartDate ? coupleStartDate : '未设置' }}</view>\n        </view>\n\n        <!-- ✅ 改成组件：三列日期滚轮 -->\n        <button class=\"row-action\" @tap=\"openCoupleDateWheel\">修改</button>\n      </view>\n\n      <view class=\"divider\"></view>\n\n      <!-- 经期长度（改成自写滚轮） -->\n      <view class=\"row\">\n        <view class=\"row-left\">\n          <view class=\"row-title\">经期长度：{{ periodLength }}天</view>\n          <view class=\"row-sub\">您的月经大概几天</view>\n        </view>\n\n        <button class=\"row-action\" @tap=\"openPeriodWheel\">修改</button>\n      </view>\n\n      <view class=\"divider\"></view>\n\n      <!-- 周期长度（改成自写滚轮） -->\n      <view class=\"row\">\n        <view class=\"row-left\">\n          <view class=\"row-title\">周期长度：{{ cycleLength }}天</view>\n          <view class=\"row-sub\">两次月经开始日大概间隔多久</view>\n        </view>\n\n        <button class=\"row-action\" @tap=\"openCycleWheel\">修改</button>\n      </view>\n    </view>\n\n    <!-- 账号与数据 -->\n    <view class=\"card list-card\">\n      \r\n\t  <view class=\"row\" @tap=\"confirmClear\">\r\n\t    <view class=\"row-left\">\r\n\t      <view class=\"row-title danger-title\">清空本地数据</view>\r\n\t      <view class=\"row-sub\">删除本机数据缓存（不可恢复）</view>\r\n\t    </view>\r\n\t    <button class=\"row-action danger-btn\">清空</button>\r\n\t  </view>\r\n\t  \r\n\t  <view class=\"divider\"></view>\r\n\t  \r\n\t  <view class=\"row\" @tap=\"onShare\">\n        <view class=\"row-left\">\n          <view class=\"row-title\">分享“岁序”</view>\n          <view class=\"row-sub\">发给 TA 一起用</view>\n        </view>\n        <button class=\"row-action\" open-type=\"share\">分享</button>\n      </view>\n\n      <view class=\"divider\"></view>\n\n\t  <view class=\"row\" @tap=\"goAbout\">\r\n\t    <view class=\"row-left\">\r\n\t      <view class=\"row-title\">关于</view>\r\n\t      <view class=\"row-sub\">版本信息与说明</view>\r\n\t    </view>\r\n\t    <button class=\"row-action\">查看</button>\r\n\t  </view>\r\n\t  \n    </view>\n\n    <!-- 登录弹层：手机号验证码（保留原样） -->\n    <view v-if=\"showSheet\" class=\"mask\" @tap=\"closeLoginSheet\">\n      <view class=\"sheet\" @tap.stop=\"noop\">\n        <view class=\"sheet-header\">\n          <view class=\"sheet-handle\"></view>\n          <view class=\"sheet-title\">{{ isAuthed ? '账号管理' : '手机号登录' }}</view>\n        </view>\n\n        <view class=\"sheet-body\">\n          <!-- 已登录：显示手机号 + 退出 -->\n          <view v-if=\"isAuthed\" class=\"authed-box\">\n            <view class=\"authed-line\">当前账号：{{ maskedPhone }}</view>\n\n            <view class=\"field\">\n              <view class=\"field-label\">昵称（本地）</view>\n              <input class=\"field-input\" placeholder=\"给自己取个昵称\" :value=\"draftNickName\" @input=\"onNickInput\" />\n            </view>\n\n            <view class=\"field\">\n              <view class=\"field-label\">头像（本地）</view>\n              <view class=\"avatar-pick\">\n                <image class=\"avatar-only\" :src=\"draftAvatarUrl || defaultAvatar\" mode=\"aspectFill\" />\n                <button class=\"small-btn\" @tap=\"pickAvatar\">更换</button>\n              </view>\n            </view>\n\n            <button class=\"action primary\" @tap=\"saveLocalProfile\">保存</button>\n            <button class=\"action danger\" @tap=\"logoutOnly\">退出登录</button>\n          </view>\n\n          <!-- 未登录：手机号 + 验证码 -->\n          <view v-else>\n            <view class=\"field\">\n              <view class=\"field-label\">手机号</view>\n              <input\n                class=\"field-input\"\n                type=\"number\"\n                maxlength=\"11\"\n                placeholder=\"请输入手机号\"\n                :value=\"phone\"\n                @input=\"onPhoneInput\"\n              />\n            </view>\n\n            <view class=\"field code-field\">\n              <view class=\"field-label\">验证码</view>\n              <view class=\"code-row\">\n                <input\n                  class=\"field-input code-input\"\n                  type=\"number\"\n                  maxlength=\"6\"\n                  placeholder=\"6位验证码\"\n                  :value=\"code\"\n                  @input=\"onCodeInput\"\n                />\n                <button class=\"send-btn\" :disabled=\"sendDisabled\" @tap=\"sendCode\">\n                  {{ sendBtnText }}\n                </button>\n              </view>\n            </view>\n\n            <button class=\"action primary\" :disabled=\"loginDisabled\" @tap=\"loginWithPhone\">登录</button>\n\n            <view class=\"tip\">\n              说明：目前仅本地登录态演示；接入短信接口与服务端 token 后将开启云同步。\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ✅ 自写滚轮弹层：单列 picker-view（经期 / 周期共用） -->\n    <view v-if=\"showWheel\" class=\"w-mask\" @tap=\"closeWheel\">\n      <view class=\"w-sheet\" @tap.stop=\"noop\">\n        <view class=\"w-top\">\n          <text class=\"w-btn\" @tap=\"closeWheel\">取消</text>\n          <text class=\"w-title\">{{ wheelTitle }}</text>\n          <text class=\"w-btn w-ok\" @tap=\"confirmWheel\">完成</text>\n        </view>\n\n        <view class=\"w-body\">\n          <picker-view\n            class=\"w-picker\"\n            :value=\"[wheelIndex]\"\n            @change=\"onWheelChange\"\n            :indicator-style=\"'height: 88rpx;'\"\n            :mask-style=\"'background: transparent;'\"\n          >\n            <picker-view-column>\n              <view\n                v-for=\"(it, i) in wheelOptions\"\n                :key=\"'w-'+i\"\n                :class=\"['w-item', i === wheelDraftIndex ? 'w-item-active' : '']\"\n              >\n                {{ it }}天\n              </view>\n            </picker-view-column>\n          </picker-view>\n\n          <!-- 中间高亮框（更“自家风格”） -->\n          <view class=\"w-indicator\"></view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ✅ 三列日期滚轮组件（我们在一起的日期） -->\r\n\t<!-- subtitle=\"选择未来日期倒数，选择过去日期正数\" -->\r\n\t\n    <YMDWheel\n      :show=\"showDateWheel\"\n      :value=\"coupleStartDate\"\n      title=\"我们在一起的日期\"\n      @cancel=\"closeCoupleDateWheel\"\n      @confirm=\"onCoupleDateConfirm\"\n    />\n  </view>\n</template>\n\n<script>\nconst storage = require('../../utils/storage');\nimport YMDWheel from '@/components/YMD-Wheel/YMD-Wheel.vue';\n\nconst PERIOD_STORE_KEY = 'period_record_v1';\nconst AUTH_KEY = 'phone_auth_v1';\n\nconst DEFAULTS = {\n  cycleLength: 28,\n  periodLength: 5,\n  lutealDays: 14\n};\n\nfunction loadPeriodSettings() {\n  const v = uni.getStorageSync(PERIOD_STORE_KEY);\n  const settings = v && v.settings ? v.settings : {};\n  return {\n    cycleLength: Number(settings.cycleLength || DEFAULTS.cycleLength),\n    periodLength: Number(settings.periodLength || DEFAULTS.periodLength)\n  };\n}\nfunction savePeriodSettings(next) {\n  const v = uni.getStorageSync(PERIOD_STORE_KEY) || {};\n  const oldSettings = v && v.settings ? v.settings : {};\n  v.settings = {\n    ...DEFAULTS,\n    ...oldSettings,\n    ...next\n  };\n  uni.setStorageSync(PERIOD_STORE_KEY, v);\n}\nfunction maskPhone(p) {\n  const s = String(p || '');\n  if (s.length < 7) return s;\n  return s.slice(0, 3) + '****' + s.slice(-4);\n}\n\nexport default {\n  components: { YMDWheel },\n\n  data() {\n    return {\n      defaultAvatar: '/assets/icons/default_avatar.png',\n      coupleStartDate: '',\n\n      // 本地资料\n      userProfile: null,\n      draftAvatarUrl: '',\n      draftNickName: '',\n\n      // 手机号登录\n      showSheet: false,\n      phone: '',\n      code: '',\n      countdown: 0,\n      timer: null,\n\n      // auth\n      auth: null,\n      isAuthed: false,\n\n      // 经期/周期\n      periodLength: DEFAULTS.periodLength,\n      cycleLength: DEFAULTS.cycleLength,\n\n      // ✅ 自写滚轮相关\n      showWheel: false,\n      wheelType: '', // 'period' | 'cycle'\n      wheelTitle: '',\n      wheelOptions: [],\n      wheelIndex: 0, // picker-view 用 index\n      wheelDraftIndex: 0, // change 时暂存，点完成才提交\n\n      // ✅ 日期滚轮组件：只需要开关\n      showDateWheel: false\n    };\n  },\n\n  computed: {\n    displayName() {\n      const p = this.userProfile;\n      if (p && p.nickName) return p.nickName;\n      return this.isAuthed ? '已登录用户' : '未登录';\n    },\n    displayAvatar() {\n      const p = this.userProfile;\n      if (p && p.avatarUrl) return p.avatarUrl;\n      return this.defaultAvatar;\n    },\n    maskedPhone() {\n      return maskPhone(this.auth && this.auth.phone);\n    },\n    sendDisabled() {\n      return this.countdown > 0 || !this.isValidPhone(this.phone);\n    },\n    sendBtnText() {\n      return this.countdown > 0 ? `${this.countdown}s` : '发送';\n    },\n    loginDisabled() {\n      return !this.isValidPhone(this.phone) || String(this.code || '').length < 4;\n    }\n  },\n\n  onShow() {\n    // 本地资料\n    const profile = storage.getUserProfile ? storage.getUserProfile() : null;\n    this.setData({\n      userProfile: profile || null,\n      draftAvatarUrl: (profile && profile.avatarUrl) || '',\n      draftNickName: (profile && profile.nickName) || ''\n    });\n\n    // 在一起日期\n    const date = storage.getCoupleStartDate ? storage.getCoupleStartDate() : '';\n    this.setData({ coupleStartDate: date || '' });\n\n    // auth\n    const a = uni.getStorageSync(AUTH_KEY) || null;\n    const isAuthed = !!(a && a.phone && a.token);\n    this.setData({ auth: a, isAuthed });\n\n    // 经期/周期设置\n    const s = loadPeriodSettings();\n    this.setData({\n      periodLength: s.periodLength,\n      cycleLength: s.cycleLength\n    });\n  },\n\n  onHide() {\n    this.clearTimer();\n  },\n\n  methods: {\n    // ================= 三列日期滚轮：我们在一起的日期（组件版） =================\n    openCoupleDateWheel() {\n      this.setData({ showDateWheel: true });\n    },\n    closeCoupleDateWheel() {\n      this.setData({ showDateWheel: false });\n    },\n    onCoupleDateConfirm(dateStr) {\n      // dateStr: YYYY-MM-DD（组件已保证格式与越界修正）\n      storage.setCoupleStartDate && storage.setCoupleStartDate(dateStr);\n      this.setData({ coupleStartDate: dateStr, showDateWheel: false });\n      uni.showToast({ title: '已保存', icon: 'success' });\n    },\n\n    // ----------------- 登录弹层 -----------------\n    openLoginSheet() {\n      const p = this.userProfile || {};\n      this.setData({\n        showSheet: true,\n        draftAvatarUrl: p.avatarUrl || '',\n        draftNickName: p.nickName || ''\n      });\n    },\n    closeLoginSheet() {\n      this.setData({ showSheet: false });\n    },\n    noop() {},\n\n    onPhoneInput(e) {\n      const v = (e.detail && e.detail.value) || '';\n      this.setData({ phone: v.replace(/\\s/g, '') });\n    },\n    onCodeInput(e) {\n      const v = (e.detail && e.detail.value) || '';\n      this.setData({ code: v.replace(/\\s/g, '') });\n    },\n    isValidPhone(p) {\n      const s = String(p || '').trim();\n      return /^1\\d{10}$/.test(s);\n    },\n    sendCode() {\n      if (this.sendDisabled) return;\n      uni.showToast({ title: '验证码已发送（演示）', icon: 'none' });\n\n      this.setData({ countdown: 60 });\n      this.clearTimer();\n      this.timer = setInterval(() => {\n        const next = Math.max(0, (this.countdown || 0) - 1);\n        this.setData({ countdown: next });\n        if (next <= 0) this.clearTimer();\n      }, 1000);\n    },\n    loginWithPhone() {\n      if (this.loginDisabled) return;\n      const token = 'mock_' + Date.now();\n      const a = { phone: String(this.phone), token, at: Date.now() };\n      uni.setStorageSync(AUTH_KEY, a);\n      this.setData({\n        auth: a,\n        isAuthed: true,\n        showSheet: false,\n        code: ''\n      });\n      uni.showToast({ title: '登录成功', icon: 'success' });\n    },\n    logoutOnly() {\n      uni.removeStorageSync(AUTH_KEY);\n      this.setData({\n        auth: null,\n        isAuthed: false,\n        showSheet: false\n      });\n      uni.showToast({ title: '已退出', icon: 'success' });\n    },\n    clearTimer() {\n      if (this.timer) {\n        clearInterval(this.timer);\n        this.timer = null;\n      }\n    },\n\n    onNickInput(e) {\n      const v = (e.detail && e.detail.value) || '';\n      this.setData({ draftNickName: v });\n    },\n    pickAvatar() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        success: (res) => {\n          const url = (res.tempFilePaths && res.tempFilePaths[0]) || '';\n          this.setData({ draftAvatarUrl: url });\n        }\n      });\n    },\n    saveLocalProfile() {\n      const nickName = String(this.draftNickName || '').trim();\n      if (!nickName) {\n        uni.showToast({ title: '请先填写昵称', icon: 'none' });\n        return;\n      }\n      const profile = {\n        nickName,\n        avatarUrl: this.draftAvatarUrl || ''\n      };\n      storage.setUserProfile && storage.setUserProfile(profile);\n      this.setData({ userProfile: profile });\n      uni.showToast({ title: '已保存', icon: 'success' });\n      this.closeLoginSheet();\n    },\n\n    // ----------------- ✅ 自写滚轮：经期/周期 -----------------\n    openPeriodWheel() {\n      const opts = [];\n      for (let i = 2; i <= 20; i++) opts.push(i);\n      const idx = Math.max(0, opts.indexOf(Number(this.periodLength)));\n\n      this.setData({\n        showWheel: true,\n        wheelType: 'period',\n        wheelTitle: '经期长度',\n        wheelOptions: opts,\n        wheelIndex: idx,\n        wheelDraftIndex: idx\n      });\n    },\n    openCycleWheel() {\n      const opts = [];\n      for (let i = 16; i <= 60; i++) opts.push(i);\n      const idx = Math.max(0, opts.indexOf(Number(this.cycleLength)));\n\n      this.setData({\n        showWheel: true,\n        wheelType: 'cycle',\n        wheelTitle: '周期长度',\n        wheelOptions: opts,\n        wheelIndex: idx,\n        wheelDraftIndex: idx\n      });\n    },\n    closeWheel() {\n      this.setData({ showWheel: false });\n    },\n    onWheelChange(e) {\n      const v = e && e.detail && e.detail.value ? e.detail.value : [0];\n      const idx = Number(v[0] || 0);\n      this.setData({ wheelDraftIndex: idx });\n    },\n    confirmWheel() {\n      const idx = Number(this.wheelDraftIndex || 0);\n      const val = this.wheelOptions[idx];\n\n      if (this.wheelType === 'period') {\n        savePeriodSettings({ periodLength: Number(val) });\n        this.setData({ periodLength: Number(val) });\n      } else if (this.wheelType === 'cycle') {\n        savePeriodSettings({ cycleLength: Number(val) });\n        this.setData({ cycleLength: Number(val) });\n      }\n\n      this.setData({ showWheel: false });\n      uni.showToast({ title: '已保存', icon: 'success' });\n    },\n\n    // ----------------- 清空 -----------------\n    confirmClear() {\n      uni.showModal({\n        title: '确认清空？',\n        content: '将删除本机所有缓存数据（包括重要日子、经期记录等），不可恢复。',\n        confirmText: '清空',\n        confirmColor: '#e5484d',\n        success: (res) => {\n          if (res.confirm) {\n            try {\n              uni.clearStorageSync();\n            } catch (e) {\n              try {\n                uni.removeStorageSync(AUTH_KEY);\n                uni.removeStorageSync(PERIOD_STORE_KEY);\n              } catch (e2) {}\n            }\n\n            this.setData({\n              userProfile: null,\n              draftAvatarUrl: '',\n              draftNickName: '',\n              auth: null,\n              isAuthed: false,\n              phone: '',\n              code: '',\n              coupleStartDate: '',\n              showSheet: false,\n              showWheel: false,\n              showDateWheel: false\n            });\n\n            uni.showToast({ title: '已清空', icon: 'success' });\n            uni.switchTab({ url: '/pages/home/home' });\n          }\n        }\n      });\n    },\n\n    goAbout() {\n      uni.navigateTo({ url: '/pages/about/about' });\n    },\n\n    onShare() {\n      // open-type=\"share\" 处理\n    }\n  }\n};\n</script>\n\n<style>\n@import './me.css';\n</style>\n","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./me.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1768876148675\n      var cssReload = require(\"D:/Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}