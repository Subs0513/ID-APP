{"version":3,"sources":["uni-app:///pages/editDetail/editDetail.vue","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?7169","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?5062","uni-app:///main.js","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?33d0","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?958a","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?d54b","webpack:///D:/PrivateFiles/HBuilderProjects/ID-Local/pages/editDetail/editDetail.vue?bc02"],"names":["components","YMDWheel","data","id","list","typeOptions","value","text","typeIndex","form","title","date","type","note","isTop","includeStart","showDateWheel","dateWheelTemp","onLoad","uni","icon","setTimeout","methods","setData","Object","onTitle","onDate","openDateWheel","onDateWheelCancel","onDateWheelConfirm","onDateWheelUpdateShow","onType","onNote","onTop","onIncludeStart","save","storage","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAIA;EACAA;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC,cACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MAEAC;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA;MACAC;MACAC;MAEAV;IACA;EACA;EACAW;IACAC;MACAT;IACA;IAEA;IACA;MACAS;QACAT;QACAU;MACA;MACAC;QAAA;MAAA;MACA;IACA;IAEA;IACA;MAAA;IAAA;IAEA;MACAF;QACAT;QACAU;MACA;MACAC;QAAA;MAAA;MACA;IACA;IAEA;MAAA;IAAA;IACA;IAEA;MACAlB;MACAC;MACAI;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA;MACAC;MACAC;IACA;EACA;EACAK;IACAC;MAAA;MACA;MACAC;QACA;MACA;IACA;IAEAC;MACA;QACAhB,sCACA;UACAC;QAAA;MAEA;IACA;IAEA;IACAgB;MACA;QACAjB,sCACA;UACAE;QAAA;MAEA;IACA;IAEA;IACA;IACA;IACAgB;MACA;MACA;QACAX;QACAC;MACA;IACA;IAEAW;MACA;QACAZ;MACA;IACA;IAEAa;MACA;MACA;QACAb;QACAC;QACAR,sCACA;UACAE;QAAA;MAEA;IACA;IAEAmB;MACA;MACA;QACAd;MACA;IACA;IAEAe;MACA;MACA;MACA;QACAvB;QACAC,sCACA;UACAG;QAAA;MAEA;IACA;IAEAoB;MACA;QACAvB,sCACA;UACAI;QAAA;MAEA;IACA;IAEAoB;MACA;QACAxB,sCACA;UACAK;QAAA;MAEA;IACA;IAEAoB;MACA;QACAzB,sCACA;UACAM;QAAA;MAEA;IACA;IAEAoB;MAAA;MACA;MACA;QACAhB;UACAT;UACAU;QACA;QACA;MACA;MAEA;QACAD;UACAT;UACAU;QACA;QACA;MACA;MAEA;MACA;QAAA;MAAA;MACA;QACAD;UACAT;UACAU;QACA;QACA;MACA;MAEAhB,4CACAA;QACAM;QACAC;QACAC;QACAC;QACAC;QACAC;MAAA,EACA;MAEAqB;MAEAjB;QACAT;QACAU;MACA;;MAEA;MACAC;QACAF;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnWA;AAAA;AAAA;AAAA;AAAm+B,CAAgB,67BAAG,EAAC,C;;;;;;;;;;;ACAv/B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAkB,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkrB,CAAgB,grBAAG,EAAC,C","file":"pages/editDetail/editDetail.js","sourcesContent":["<template>\n    <!-- pages/editDetail/editDetail.wxml -->\n    <view class=\"container page-bottom-space\">\n        <view class=\"card\">\n            <!-- 标题 -->\n            <view class=\"label row-left-with-icon\">\n                <image class=\"label-icon\" src=\"/static/assets/icons/f_bt.svg\" mode=\"aspectFit\" />\n                <text>标题</text>\n            </view>\n            <view class=\"field field--single\">\n                <input class=\"field__input\" placeholder=\"例如：在一起一周年\" :value=\"form.title\" @input=\"onTitle\" />\n            </view>\n\n            <!-- 日期 -->\n            <view class=\"label row-left-with-icon\">\n                <image class=\"label-icon\" src=\"/static/assets/icons/f_rq.svg\" mode=\"aspectFit\" />\n                <text>日期</text>\n            </view>\n\n            <!-- ✅ 用自定义 YMD-Wheel 替换原生日期选择器 -->\n            <view @tap=\"openDateWheel\">\n                <view class=\"field field--single\">\n                    <view :class=\"'field__value ' + (!form.date ? 'field__placeholder' : '')\">\n                        {{ form.date || '请选择日期' }}\n                    </view>\n                </view>\n            </view>\n\n            <!-- 类型 -->\n            <view class=\"label row-left-with-icon\">\n                <image class=\"label-icon\" src=\"/static/assets/icons/f_lx.svg\" mode=\"aspectFit\" />\n                <text>类型</text>\n            </view>\n            <picker mode=\"selector\" :range=\"typeOptions\" range-key=\"text\" :value=\"typeIndex\" @change=\"onType\">\n                <view class=\"field field--single\">\n                    <view class=\"field__value\">\n                        {{ typeOptions[typeIndex].text }}\n                    </view>\n                </view>\n            </picker>\n\n            <!-- 备注 -->\n            <view class=\"label row-left-with-icon\">\n                <image class=\"label-icon\" src=\"/static/assets/icons/f_bz.svg\" mode=\"aspectFit\" />\n                <text>备注（可选）</text>\n            </view>\n            <view class=\"field field--multi\">\n                <textarea\n                    class=\"field__textarea\"\n                    placeholder=\"写点说明...\"\n                    :value=\"form.note\"\n                    @input=\"onNote\"\n                ></textarea>\n            </view>\n\n            <!-- 置顶（带图标） -->\n            <view class=\"row\" style=\"margin-top: 18rpx\">\n                <view class=\"row-left row-left-with-icon\">\n                    <image class=\"top-icon\" src=\"/static/assets/icons/f_zd.svg\" mode=\"aspectFit\" />\n                    <view class=\"muted\">是否置顶</view>\n                </view>\n\n                <switch :checked=\"form.isTop\" @change=\"onTop\" color=\"#f6a5b5\" />\n            </view>\n\n            <!-- 正数包含起始日（带图标） -->\n            <view class=\"row\" style=\"margin-top: 18rpx\">\n                <view class=\"row-left row-left-with-icon\">\n                    <image class=\"include-icon\" src=\"/static/assets/icons/f_jy.svg\" mode=\"aspectFit\" />\n                    <view class=\"muted\">正数包含起始日</view>\n                </view>\n\n                <switch :checked=\"form.includeStart\" @change=\"onIncludeStart\" color=\"#f6a5b5\" />\n            </view>\n\n            <!-- ✅ 只保留保存：居中且拉长 -->\n            <view style=\"margin-top: 28rpx; display: flex; justify-content: center\">\n                <button\n                    class=\"btn\"\n                    @tap=\"save\"\n                    style=\"width: 520rpx; height: 92rpx; line-height: 92rpx; border-radius: 16rpx\"\n                >\n                    保存\n                </button>\n            </view>\n\n            <!-- <view wx:if=\"{{isEdit}}\" style=\"margin-top: 18rpx;\">\n      <button class=\"btn btn-danger\" bindtap=\"remove\">删除</button>\n    </view> -->\n        </view>\n\n        <!-- ✅ 自定义日期滚轮（遮罩 + 底部弹层） -->\n        <YMDWheel\n            :show=\"showDateWheel\"\n            :value=\"dateWheelTemp\"\n            title=\"选择日期\"\n            subtitle=\"\"\n            @cancel=\"onDateWheelCancel\"\n            @confirm=\"onDateWheelConfirm\"\n            @update:show=\"onDateWheelUpdateShow\"\n        />\n    </view>\n</template>\n\n<script>\nconst storage = require('../../utils/storage');\n\nimport YMDWheel from '../../components/YMD-Wheel/YMD-Wheel.vue';\n\nexport default {\n    components: {\n        YMDWheel\n    },\n    data() {\n        return {\n            id: '',\n            list: [],\n            typeOptions: [\n                {\n                    value: 'anniversary',\n                    text: '纪念日'\n                },\n                {\n                    value: 'countdown',\n                    text: '倒计时'\n                },\n                {\n                    value: 'birthday',\n                    text: '生日'\n                },\n                {\n                    value: 'other',\n                    text: '其他'\n                }\n            ],\n\n            typeIndex: 0,\n\n            form: {\n                title: '',\n                date: '',\n                type: 'anniversary',\n                note: '',\n                isTop: false,\n                includeStart: false\n            },\n\n            // ✅ 自定义日期滚轮\n            showDateWheel: false,\n            dateWheelTemp: '',\n\n            text: ''\n        };\n    },\n    onLoad(options) {\n        uni.setNavigationBarTitle({\n            title: '编辑重要日子'\n        });\n\n        const id = options && options.id ? options.id : '';\n        if (!id) {\n            uni.showToast({\n                title: '缺少参数',\n                icon: 'none'\n            });\n            setTimeout(() => uni.navigateBack(), 600);\n            return;\n        }\n\n        const list = storage.getList();\n        const item = list.find((x) => x.id === id);\n\n        if (!item) {\n            uni.showToast({\n                title: '未找到该记录',\n                icon: 'none'\n            });\n            setTimeout(() => uni.navigateBack(), 600);\n            return;\n        }\n\n        const idx = this.typeOptions.findIndex((t) => t.value === item.type);\n        const typeIndex = idx >= 0 ? idx : 0;\n\n        this.setData({\n            id,\n            list,\n            typeIndex,\n            form: {\n                title: item.title || '',\n                date: item.date || '',\n                type: item.type || this.typeOptions[typeIndex].value,\n                note: item.note || '',\n                isTop: !!item.isTop,\n                includeStart: !!item.includeStart\n            },\n\n            // ✅ 同步自定义滚轮的初始值\n            showDateWheel: false,\n            dateWheelTemp: item.date || ''\n        });\n    },\n    methods: {\n        setData(obj) {\n            // 兼容：在 HBuilder/uni-app 中也可用 this.xxx = ...\n            Object.keys(obj).forEach((k) => {\n                this[k] = obj[k];\n            });\n        },\n\n        onTitle(e) {\n            this.setData({\n                form: {\n                    ...this.form,\n                    title: e.detail.value\n                }\n            });\n        },\n\n        // 保留：兼容旧逻辑（现在不再由原生 picker 触发）\n        onDate(e) {\n            this.setData({\n                form: {\n                    ...this.form,\n                    date: e.detail.value\n                }\n            });\n        },\n\n        // =======================\n        // ✅ 自定义日期滚轮\n        // =======================\n        openDateWheel() {\n            const v = this.form && this.form.date ? this.form.date : this.dateWheelTemp || '';\n            this.setData({\n                showDateWheel: true,\n                dateWheelTemp: v\n            });\n        },\n\n        onDateWheelCancel() {\n            this.setData({\n                showDateWheel: false\n            });\n        },\n\n        onDateWheelConfirm(dateStr) {\n            // dateStr: YYYY-MM-DD\n            this.setData({\n                showDateWheel: false,\n                dateWheelTemp: dateStr,\n                form: {\n                    ...this.form,\n                    date: dateStr\n                }\n            });\n        },\n\n        onDateWheelUpdateShow(v) {\n            // 兼容组件内部 emit('update:show', false)\n            this.setData({\n                showDateWheel: !!v\n            });\n        },\n\n        onType(e) {\n            const index = Number(e.detail.value) || 0;\n            const type = this.typeOptions[index].value;\n            this.setData({\n                typeIndex: index,\n                form: {\n                    ...this.form,\n                    type\n                }\n            });\n        },\n\n        onNote(e) {\n            this.setData({\n                form: {\n                    ...this.form,\n                    note: e.detail.value\n                }\n            });\n        },\n\n        onTop(e) {\n            this.setData({\n                form: {\n                    ...this.form,\n                    isTop: e.detail.value\n                }\n            });\n        },\n\n        onIncludeStart(e) {\n            this.setData({\n                form: {\n                    ...this.form,\n                    includeStart: e.detail.value\n                }\n            });\n        },\n\n        save() {\n            const title = (this.form.title || '').trim();\n            if (!title) {\n                uni.showToast({\n                    title: '请输入标题',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            if (!this.form.date) {\n                uni.showToast({\n                    title: '请选择日期',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            const list = storage.getList();\n            const idx = list.findIndex((x) => x.id === this.id);\n            if (idx < 0) {\n                uni.showToast({\n                    title: '未找到该记录',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            list[idx] = {\n                ...list[idx],\n                title: this.form.title,\n                date: this.form.date,\n                type: this.form.type,\n                note: this.form.note,\n                isTop: !!this.form.isTop,\n                includeStart: !!this.form.includeStart\n            };\n\n            storage.setList(list);\n\n            uni.showToast({\n                title: '已保存',\n                icon: 'success'\n            });\n\n            // 保存后返回上一页\n            setTimeout(() => {\n                uni.navigateBack();\n            }, 300);\n        }\n    }\n};\n</script>\n\n<style>\n@import './editDetail.css';\n\n</style>\n","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./editDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./editDetail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1768876148739\n      var cssReload = require(\"D:/Programming/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/editDetail/editDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./editDetail.vue?vue&type=template&id=7de17734&\"\nvar renderjs\nimport script from \"./editDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./editDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/editDetail/editDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./editDetail.vue?vue&type=template&id=7de17734&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./editDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Programming/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./editDetail.vue?vue&type=script&lang=js&\""],"sourceRoot":""}